(()=>{var z=Object.defineProperty;var W=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var N=Math.pow,R=(s,x,i)=>x in s?z(s,x,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[x]=i,P=(s,x)=>{for(var i in x||(x={}))O.call(x,i)&&R(s,i,x[i]);if(W)for(var i of W(x))F.call(x,i)&&R(s,i,x[i]);return s};window.PhpDebugBar=window.PhpDebugBar||{};(function(){const s=window.PhpDebugBar;s.utils=s.utils||{};const x=s.utils.getDictValue=function(e,t,o){if(e==null)return o;const p=String(t).split(".");let y=e;for(const k of p)if(y==null||(y=y[k],y===void 0))return o;return y};s.utils.csscls=function(e,t){const o=String(e).trim();return o.includes(" ")?o.split(/\s+/).filter(Boolean).map(p=>s.utils.csscls(p,t)).join(" "):o.startsWith(".")?`.${t}${o.slice(1)}`:t+o},s.utils.makecsscls=function(e){return t=>s.utils.csscls(t,e)};const i=s.utils.makecsscls("phpdebugbar-");class l{constructor(t={}){this._attributes=P({},this.defaults),this._boundAttributes={},this.el=document.createElement(this.tagName),this.className&&this.el.classList.add(...this.className.split(" ")),this.initialize(t),this.render()}initialize(t){this.set(t)}render(){}set(t,o){if(typeof t!="string"){for(const p in t)this.set(p,t[p]);return}if(this._attributes[t]=o,this._boundAttributes[t])for(const p of this._boundAttributes[t])p.call(this,o)}has(t){return this._attributes[t]!==void 0&&this._attributes[t]!==null}get(t){return this._attributes[t]}bindAttr(t,o){if(Array.isArray(t)){for(const p of t)this.bindAttr(p,o);return}if(this._boundAttributes[t]||(this._boundAttributes[t]=[]),o instanceof HTMLElement){const p=o;o=y=>p.textContent=y||""}this._boundAttributes[t].push(o),this.has(t)&&o.call(this,this._attributes[t])}static extend(t){const o=this;class p extends o{}return Object.assign(p.prototype,t),Object.assign(p,o),p.__super__=o.prototype,p}}l.prototype.tagName="div",l.prototype.className=null,l.prototype.defaults={},s.Widget=l;const b=l.extend({className:i("panel"),render(){this.tab=document.createElement("a"),this.tab.classList.add(i("tab")),this.icon=document.createElement("i"),this.tab.append(this.icon),this.bindAttr("icon",function(t){t?this.icon.className=`phpdebugbar-icon phpdebugbar-icon-${t}`:this.icon.className=""});const e=document.createElement("span");e.classList.add(i("text")),this.tab.append(e),this.bindAttr("title",e),this.badge=document.createElement("span"),this.badge.classList.add(i("badge")),this.tab.append(this.badge),this.bindAttr("badge",function(t){t!==null?(this.badge.textContent=t,this.badge.classList.add(i("visible"))):this.badge.classList.remove(i("visible"))}),this.bindAttr("widget",function(t){this.el.innerHTML="",this.el.append(t.el)}),this.bindAttr("data",function(t){this.has("widget")&&(this.get("widget").set("data",t),this.tab.setAttribute("data-empty",Object.keys(t).length===0||t.count===0))})}}),a=l.extend({tagName:"span",className:i("indicator"),render(){this.icon=document.createElement("i"),this.el.append(this.icon),this.bindAttr("icon",function(t){t?this.icon.className=`phpdebugbar-icon phpdebugbar-icon-${t}`:this.icon.className=""}),this.bindAttr("link",function(t){t?(this.el.addEventListener("click",()=>{this.get("debugbar").showTab(t)}),this.el.style.cursor="pointer"):this.el.style.cursor=""});const e=document.createElement("span");e.classList.add(i("text")),this.el.append(e),this.bindAttr(["title","data"],e),this.tooltip=document.createElement("span"),this.tooltip.classList.add(i("tooltip"),i("disabled")),this.el.append(this.tooltip),this.bindAttr("tooltip",function(t){if(t)if(Array.isArray(t)||typeof t=="object"){const o=document.createElement("dl");for(const[p,y]of Object.entries(t)){const k=document.createElement("dt");k.textContent=p,o.append(k);const n=document.createElement("dd");n.textContent=y,o.append(n)}this.tooltip.innerHTML="",this.tooltip.append(o),this.tooltip.classList.remove(i("disabled"))}else this.tooltip.textContent=t,this.tooltip.classList.remove(i("disabled"));else this.tooltip.classList.add(i("disabled"))})}}),f=l.extend({tagName:"form",className:i("settings"),settings:{},initialize(e){this.set(e);const t=this.get("debugbar");this.settings=JSON.parse(localStorage.getItem("phpdebugbar-settings"))||{};for(const o in t.options)o in this.settings&&(t.options[o]=this.settings[o]),o==="theme"?t.setTheme(t.options[o]):t.el.setAttribute(`data-${o}`,t.options[o])},clearSettings(){const e=this.get("debugbar");if(localStorage.removeItem("phpdebugbar-settings"),localStorage.removeItem("phpdebugbar-ajaxhandler-autoshow"),this.settings={},e.options=P({},e.defaultOptions),e.ajaxHandler){const t=e.ajaxHandler.defaultAutoShow;e.ajaxHandler.setAutoShow(t),this.set("autoshow",t),e.controls.__datasets&&e.controls.__datasets.get("widget").set("autoshow",this.autoshow.checked)}this.initialize(e.options)},storeSetting(e,t){this.settings[e]=t;const o=this.get("debugbar");o.options[e]=t,e!=="theme"&&o.el.setAttribute(`data-${e}`,t),localStorage.setItem("phpdebugbar-settings",JSON.stringify(this.settings))},render(){this.el.innerHTML="";const e=this.get("debugbar"),t=this,o={},p=document.createElement("select");p.innerHTML='<option value="auto">Auto (System preference)</option><option value="light">Light</option><option value="dark">Dark</option>',p.value=e.options.theme,p.addEventListener("change",function(){t.storeSetting("theme",this.value),e.setTheme(this.value)}),o.Theme=p;const y=document.createElement("select");y.innerHTML='<option value="bottomLeft">Bottom Left</option><option value="bottomRight">Bottom Right</option><option value="topLeft">Top Left</option><option value="topRight">Top Right</option>',y.value=e.options.openBtnPosition,y.addEventListener("change",function(){t.storeSetting("openBtnPosition",this.value)}),o["Open Button Position"]=y,this.hideEmptyTabs=document.createElement("input"),this.hideEmptyTabs.type="checkbox",this.hideEmptyTabs.checked=e.options.hideEmptyTabs,this.hideEmptyTabs.addEventListener("click",function(){t.storeSetting("hideEmptyTabs",this.checked)});const k=document.createElement("label");k.append(this.hideEmptyTabs,"Hide empty tabs until they have data"),o["Hide Empty Tabs"]=k,this.autoshow=document.createElement("input"),this.autoshow.type="checkbox",this.autoshow.checked=e.ajaxHandler&&e.ajaxHandler.autoShow,this.autoshow.addEventListener("click",function(){e.ajaxHandler&&e.ajaxHandler.setAutoShow(this.checked),e.controls.__datasets&&e.controls.__datasets.get("widget").set("autoshow",this.checked)}),this.bindAttr("autoshow",function(){this.autoshow.checked=this.get("autoshow"),this.autoshow.closest(`.${i("form-row")}`).style.display=""});const n=document.createElement("label");n.append(this.autoshow,"Automatically show new incoming Ajax requests"),o.Autoshow=n;const r=document.createElement("button");r.textContent="Reset settings",r.addEventListener("click",u=>{u.preventDefault(),t.clearSettings(),t.render()}),o["Reset to defaults"]=r;for(const[u,d]of Object.entries(o)){const h=document.createElement("div");h.classList.add(i("form-row"));const m=document.createElement("div");m.classList.add(i("form-label")),m.textContent=u,h.append(m);const g=document.createElement("div");g.classList.add(i("form-input")),d instanceof HTMLElement?g.append(d):g.innerHTML=d,h.append(g),t.el.append(h)}this.ajaxHandler||(this.autoshow.closest(`.${i("form-row")}`).style.display="none")}});class c{constructor(t){this.debugbar=t}format(t,o,p,y){if(p=p?` ${p}`:"",y=y||Object.keys(this.debugbar.datasets).length,o.__meta===void 0)return`#${y}${p}`;const k=o.__meta.uri.split("/");let n=k.pop();n||(n=`${k.pop()||""}/`),k.length&&!isNaN(n)&&(n=`${k.pop()}/${n}`);const r=150;return n.length>r&&(n=`${n.substr(0,r)}...`),`#${y} ${n}${p} (${o.__meta.datetime.split(" ")[1]})`}}s.DatasetTitleFormater=c;const v=s.DebugBar=l.extend({className:`phpdebugbar ${i("minimized")}`,options:{bodyMarginBottom:!0,theme:"auto",openBtnPosition:"bottomLeft",hideEmptyTabs:!1},initialize(e={}){this.options=Object.assign({},this.options,e),this.defaultOptions=P({},this.options),this.controls={},this.dataMap={},this.datasets={},this.firstTabName=null,this.activePanelName=null,this.activeDatasetId=null,this.datesetTitleFormater=new c(this);const t=window.getComputedStyle(document.body);this.bodyMarginBottomHeight=Number.parseInt(t.marginBottom);try{this.isIframe=window.self!==window.top&&window.top.phpdebugbar}catch(o){this.isIframe=!1}this.registerResizeHandler(),this.registerMediaListener(),this.settings=new s.DebugBar.Tab({icon:"adjustments-horizontal",title:"Settings",widget:new f({debugbar:this})})},registerResizeHandler(){if(this.resize.bind===void 0||this.isIframe)return;const e=this.resize.bind(this);this.respCSSSize=0,window.addEventListener("resize",e),setTimeout(e,20)},registerMediaListener(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.options.theme==="auto"&&this.setTheme("auto")})},setTheme(e){this.options.theme=e,e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),this.el.setAttribute("data-theme",e),this.openHandler&&this.openHandler.el.setAttribute("data-theme",e)},resize(){if(this.isIframe)return;let e=this.respCSSSize;if(this.respCSSSize===0){const k=Array.from(this.header.children).filter(n=>n.offsetParent!==null);for(const n of k){const r=window.getComputedStyle(n);e+=n.offsetWidth+parseFloat(r.marginLeft)+parseFloat(r.marginRight)}}const t=this.header.offsetWidth,o=i("mini-design"),p=this.header.classList.contains(o);t<=e&&!p?(this.respCSSSize=e,this.header.classList.add(o)):e<t&&p&&(this.respCSSSize=0,this.header.classList.remove(o));const y=this.body.clientHeight||parseInt(localStorage.getItem("phpdebugbar-height"),10)||300;this.setHeight(y)},render(){this.isIframe&&(this.el.style.display="none");const e=this;document.body.append(this.el),this.dragCapture=document.createElement("div"),this.dragCapture.classList.add(i("drag-capture")),this.el.append(this.dragCapture),this.resizeHandle=document.createElement("div"),this.resizeHandle.classList.add(i("resize-handle")),this.el.append(this.resizeHandle),this.header=document.createElement("div"),this.header.classList.add(i("header")),this.el.append(this.header),this.headerBtn=document.createElement("a"),this.headerBtn.classList.add(i("restore-btn")),this.header.append(this.headerBtn),this.headerBtn.addEventListener("click",()=>{e.close()}),this.headerLeft=document.createElement("div"),this.headerLeft.classList.add(i("header-left")),this.header.append(this.headerLeft),this.headerRight=document.createElement("div"),this.headerRight.classList.add(i("header-right")),this.header.append(this.headerRight),this.body=document.createElement("div"),this.body.classList.add(i("body")),this.el.append(this.body),this.recomputeBottomOffset();let t,o;const p=k=>{const n=o+(t-k.pageY);e.setHeight(n)},y=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",y),e.dragCapture.style.display="none"};this.resizeHandle.addEventListener("mousedown",k=>{o=e.body.offsetHeight,t=k.pageY,document.addEventListener("mousemove",p),document.addEventListener("mouseup",y),e.dragCapture.style.display="",k.preventDefault()}),this.closebtn=document.createElement("a"),this.closebtn.classList.add(i("close-btn")),this.headerRight.append(this.closebtn),this.closebtn.addEventListener("click",()=>{e.close()}),this.minimizebtn=document.createElement("a"),this.minimizebtn.classList.add(i("minimize-btn")),this.headerRight.append(this.minimizebtn),this.minimizebtn.addEventListener("click",()=>{e.minimize()}),this.maximizebtn=document.createElement("a"),this.maximizebtn.classList.add(i("maximize-btn")),this.headerRight.append(this.maximizebtn),this.maximizebtn.addEventListener("click",()=>{e.restore()}),this.restorebtn=document.createElement("a"),this.restorebtn.classList.add(i("restore-btn")),this.restorebtn.style.display="none",this.el.append(this.restorebtn),this.restorebtn.addEventListener("click",()=>{e.restore()}),this.openbtn=document.createElement("a"),this.openbtn.classList.add(i("open-btn")),this.openbtn.style.display="none",this.headerRight.append(this.openbtn),this.openbtn.addEventListener("click",()=>{e.openHandler.show((k,n)=>{e.addDataSet(n,k,"(opened)"),e.showTab()})}),this.datasetsSelect=document.createElement("select"),this.datasetsSelect.classList.add(i("datasets-switcher")),this.datasetsSelect.setAttribute("name","datasets-switcher"),this.headerRight.append(this.datasetsSelect),this.datasetsSelect.addEventListener("change",function(){e.showDataSet(this.value)}),this.controls.__settings=this.settings,this.settings.tab.classList.add(i("tab-settings")),this.settings.tab.setAttribute("data-collector","__settings"),this.settings.el.setAttribute("data-collector","__settings"),this.maximizebtn.after(this.settings.tab),this.settings.tab.style.display="",this.settings.tab.addEventListener("click",()=>{!this.isMinimized()&&this.activePanelName==="__settings"?this.minimize():(this.showTab("__settings"),this.settings.get("widget").render())}),this.body.append(this.settings.el)},setHeight(e){const o=window.innerHeight-this.header.offsetHeight-10;e=Math.min(e,o),e=Math.max(e,40),this.body.style.height=`${e}px`,localStorage.setItem("phpdebugbar-height",e),this.recomputeBottomOffset()},restoreState(){if(this.isIframe)return;const e=localStorage.getItem("phpdebugbar-height");this.setHeight(parseInt(e)||this.body.offsetHeight);const t=localStorage.getItem("phpdebugbar-open");if(t&&t==="0")this.close();else{const o=localStorage.getItem("phpdebugbar-visible");if(o&&o==="1"){const p=localStorage.getItem("phpdebugbar-tab");this.isTab(p)?this.showTab(p):this.showTab()}}},createTab(e,t,o){const p=new b({title:o||e.replace(/[_-]/g," ").charAt(0).toUpperCase()+e.slice(1),widget:t});return this.addTab(e,p)},addTab(e,t){if(this.isControl(e))throw new Error(`${e} already exists`);const o=this;return this.headerLeft.append(t.tab),t.tab.addEventListener("click",()=>{!o.isMinimized()&&o.activePanelName===e?o.minimize():o.showTab(e)}),t.tab.setAttribute("data-empty",!0),t.tab.setAttribute("data-collector",e),t.el.setAttribute("data-collector",e),this.body.append(t.el),this.controls[e]=t,this.firstTabName===null&&(this.firstTabName=e),t},createIndicator(e,t,o,p){const y=new a({icon:t,tooltip:o});return this.addIndicator(e,y,p)},addIndicator(e,t,o){if(this.isControl(e))throw new Error(`${e} already exists`);return t.set("debugbar",this),o==="left"?this.headerLeft.prepend(t.el):this.headerRight.append(t.el),this.controls[e]=t,t},getControl(e){if(this.isControl(e))return this.controls[e]},isControl(e){return this.controls[e]!==void 0},isTab(e){return this.isControl(e)&&this.controls[e]instanceof b},isIndicator(e){return this.isControl(e)&&this.controls[e]instanceof a},reset(){this.minimize();for(const[e,t]of Object.entries(this.controls))this.isTab(e)&&t.tab.remove(),t.el.remove();this.controls={}},showTab(e){if(e||(this.activePanelName?e=this.activePanelName:e=this.firstTabName),!this.isTab(e))throw new Error(`Unknown tab '${e}'`);this.resizeHandle.style.display="block",this.body.style.display="block",this.recomputeBottomOffset();const t=i("active"),o=this.header.querySelectorAll(` div > .${t}`);for(const y of o)y.classList.remove(t);const p=this.body.querySelectorAll(`:scope > .${t}`);for(const y of p)y.classList.remove(t);this.controls[e].tab.classList.add(t),this.controls[e].el.classList.add(t),this.activePanelName=e,this.el.classList.remove(i("minimized")),localStorage.setItem("phpdebugbar-visible","1"),localStorage.setItem("phpdebugbar-tab",e),this.resize()},minimize(){const e=i("active"),t=this.header.querySelectorAll(`:scope > div > .${e}`);for(const o of t)o.classList.remove(e);this.body.style.display="none",this.resizeHandle.style.display="none",this.recomputeBottomOffset(),localStorage.setItem("phpdebugbar-visible","0"),this.el.classList.add(i("minimized")),this.resize()},isMinimized(){return this.el.classList.contains(i("minimized"))},close(){this.resizeHandle.style.display="none",this.header.style.display="none",this.body.style.display="none",this.restorebtn.style.display="",localStorage.setItem("phpdebugbar-open","0"),this.el.classList.add(i("closed")),this.recomputeBottomOffset()},isClosed(){return this.el.classList.contains(i("closed"))},restore(){this.resizeHandle.style.display="block",this.header.style.display="block",this.restorebtn.style.display="none",localStorage.setItem("phpdebugbar-open","1");const e=localStorage.getItem("phpdebugbar-tab");this.isTab(e)?this.showTab(e):this.showTab(),this.el.classList.remove(i("closed")),this.resize()},recomputeBottomOffset(){if(this.options.bodyMarginBottom){if(this.isClosed()){document.body.style.marginBottom=this.bodyMarginBottomHeight?`${this.bodyMarginBottomHeight}px`:"";return}const e=this.el.offsetHeight+(this.bodyMarginBottomHeight||0);document.body.style.marginBottom=`${e}px`}},setDataMap(e){this.dataMap=e},addDataMap(e){Object.assign(this.dataMap,e)},setData(e){return this.datasets={},this.addDataSet(e)},addDataSet(e,t,o,p){if(!e||!e.__meta)return;if(this.isIframe){window.top.phpdebugbar.addDataSet(e,t,`(iframe)${o||""}`,p);return}const y=Object.keys(this.datasets).length+1;t=t||y,e.__meta.nb=y,e.__meta.suffix=o,this.datasets[t]=e;const k=this.datesetTitleFormater.format(t,this.datasets[t],o,y);if(this.datasetTab){this.datasetTab.set("data",this.datasets);const r=Object.keys(this.datasets).length;this.datasetTab.set("badge",r>1?r:null),this.datasetTab.tab.style.display=""}const n=document.createElement("option");return n.value=t,n.textContent=k,this.datasetsSelect.append(n),this.datasetsSelect.children.length>1&&(this.datasetsSelect.style.display="block"),(p===void 0||p)&&this.showDataSet(t),this.resize(),t},loadDataSet(e,t,o,p){if(!this.openHandler)throw new Error("loadDataSet() needs an open handler");const y=this;this.openHandler.load(e,k=>{y.addDataSet(k,e,t,p),y.resize(),o&&o(k)})},getDataSet(e){return this.datasets[e]},showDataSet(e){this.activeDatasetId=e,this.dataChangeHandler(this.datasets[e]),this.datasetsSelect.value!==e&&(this.datasetsSelect.value=e),this.datasetTab&&this.datasetTab.get("widget").set("id",e)},dataChangeHandler(e){for(const[t,o]of Object.entries(this.dataMap)){const p=x(e,o[0],o[1]);if(t.includes(":")){const y=t.split(":");this.getControl(y[0]).set(y[1],p)}else this.getControl(t).set("data",p)}this.resize()},setOpenHandler(e){this.openHandler=e,this.openHandler.el.setAttribute("data-theme",this.el.getAttribute("data-theme")),e!==null?this.openbtn.style.display="":this.openbtn.style.display="none"},getOpenHandler(){return this.openHandler},enableAjaxHandlerTab(){this.datasetTab=new s.DebugBar.Tab({icon:"history",title:"Request history",widget:new s.Widgets.DatasetWidget({debugbar:this})}),this.datasetTab.tab.classList.add(i("tab-history")),this.datasetTab.tab.setAttribute("data-collector","__datasets"),this.datasetTab.el.setAttribute("data-collector","__datasets"),this.openbtn.after(this.datasetTab.tab),this.datasetTab.tab.style.display="none",this.datasetTab.tab.addEventListener("click",()=>{!this.isMinimized()&&this.activePanelName==="__datasets"?this.minimize():this.showTab("__datasets")}),this.body.append(this.datasetTab.el),this.controls.__datasets=this.datasetTab}});v.Tab=b,v.Indicator=a;class L{constructor(t,o,p){this.debugbar=t,this.headerName=o||"phpdebugbar",this.autoShow=p===void 0?!0:p,this.defaultAutoShow=this.autoShow,localStorage.getItem("phpdebugbar-ajaxhandler-autoshow")!==null&&(this.autoShow=localStorage.getItem("phpdebugbar-ajaxhandler-autoshow")==="1"),t.controls.__settings&&t.controls.__settings.get("widget").set("autoshow",this.autoShow)}handle(t){return!!(this.loadFromId(t)||this.loadFromData(t))}getHeader(t,o){if(t instanceof Response)return t.headers.get(o);if(t instanceof XMLHttpRequest)return t.getResponseHeader(o)}setAutoShow(t){this.autoShow=t,localStorage.setItem("phpdebugbar-ajaxhandler-autoshow",t?"1":"0")}loadFromId(t){const o=this.extractIdFromHeaders(t);return o&&this.debugbar.openHandler?(this.debugbar.loadDataSet(o,"(ajax)",void 0,this.autoShow),!0):!1}extractIdFromHeaders(t){return this.getHeader(t,`${this.headerName}-id`)}loadFromData(t){const o=this.extractDataFromHeaders(t);if(!o)return!1;const p=this.parseHeaders(o);if(p.error)throw new Error(`Error loading debugbar data: ${p.error}`);return p.data&&this.debugbar.addDataSet(p.data,p.id,"(ajax)",this.autoShow),!0}extractDataFromHeaders(t){let o=this.getHeader(t,this.headerName);if(o){for(let p=1;;p++){const y=this.getHeader(t,`${this.headerName}-${p}`);if(!y)break;o+=y}return decodeURIComponent(o)}}parseHeaders(t){return JSON.parse(t)}bindToFetch(){const t=this,o=window.fetch;o!==void 0&&o.polyfill!==void 0||(window.fetch=function(...p){const y=o.apply(window,p);return y.then(k=>{t.handle(k)}).catch(k=>{}),y})}bindToXHR(){const t=this,o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(p,y,k,n,r){const u=this;u.addEventListener("readystatechange",()=>{u.readyState===4&&t.handle(u)},!1),o.apply(u,[p,y,k,n,r])}}}s.AjaxHandler=L})();(function(){PhpDebugBar.Widgets={};const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),x=PhpDebugBar.Widgets.htmlize=function(n){return n.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")},i=PhpDebugBar.Widgets.renderValue=function(n,r){return typeof n!="string"?r?x(JSON.stringify(n,void 0,2)):JSON.stringify(n):n},l=PhpDebugBar.Widgets.highlight=function(n,r){if(typeof n=="string"){if(typeof phpdebugbar_hljs=="undefined")return x(n);const u=phpdebugbar_hljs.default||phpdebugbar_hljs;return r&&u.getLanguage(r)?u.highlight(n,{language:r}).value:u.highlightAuto(n).value}if(typeof phpdebugbar_hljs=="object"){const u=phpdebugbar_hljs.default||phpdebugbar_hljs;if(n.nodeType===Node.ELEMENT_NODE)u.highlightElement(n);else if(n.length)for(const d of n)u.highlightElement(d)}return n},b=PhpDebugBar.Widgets.createCodeBlock=function(n,r,u,d){const h=document.createElement("pre");h.classList.add(s("code-block"));const m=document.createElement("code");if(m.textContent=`${n}
`,h.append(m),r&&m.classList.add(`language-${r}`),l(m),m.classList.remove("hljs"),!isNaN(Number.parseFloat(u))){const g=n.split(`
`).length,E=document.createElement("ul");h.prepend(E);const C=Array.from(h.children);for(const T of C)T.classList.add(s("numbered-code"));for(let T=u;T<u+g;T++){const w=document.createElement("li");if(w.textContent=T,E.append(w),d===T){w.classList.add(s("highlighted-line"));const _=document.createElement("span");_.innerHTML="&nbsp;",w.append(_)}}}return h},{getDictValue:a}=PhpDebugBar.utils,f=PhpDebugBar.Widgets.ListWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:s("list"),initialize(n){n.itemRenderer||(n.itemRenderer=this.itemRenderer),this.set(n)},render(){this.bindAttr(["itemRenderer","data"],function(){if(this.el.innerHTML="",!this.has("data"))return;const n=this.get("data");for(let r=0;r<n.length;r++){const u=document.createElement("li");u.classList.add(s("list-item")),this.el.append(u),this.get("itemRenderer")(u,n[r])}})},itemRenderer(n,r){n.innerHTML=i(r)}}),c=PhpDebugBar.Widgets.KVListWidget=f.extend({tagName:"dl",className:s("kvlist"),render(){this.bindAttr(["itemRenderer","data"],function(){if(this.el.innerHTML="",!!this.has("data"))for(const[n,r]of Object.entries(this.get("data"))){const u=document.createElement("dt");u.classList.add(s("key")),this.el.append(u);const d=document.createElement("dd");d.classList.add(s("value")),this.el.append(d),this.get("itemRenderer")(u,d,n,r)}})},itemRenderer(n,r,u,d){n.textContent=u,r.innerHTML=x(d)}}),v=PhpDebugBar.Widgets.VariableListWidget=c.extend({className:s("kvlist varlist"),itemRenderer(n,r,u,d){const h=document.createElement("span");h.setAttribute("title",u),h.textContent=u,n.append(h);let m=d&&d.value||d;m&&m.length>100&&(m=`${m.substr(0,100)}...`);let g=null;r.textContent=m,r.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";r.classList.contains(s("pretty"))?(r.textContent=m,r.classList.remove(s("pretty"))):(g=g||b(d),r.classList.add(s("pretty")),r.innerHTML="",r.append(g))})}}),L=PhpDebugBar.Widgets.HtmlVariableListWidget=c.extend({className:s("kvlist htmlvarlist"),itemRenderer(n,r,u,d){const h=document.createElement("i");h.innerHTML=u!=null?u:"";const m=document.createElement("span");if(m.setAttribute("title",h.textContent),m.innerHTML=u!=null?u:"",n.append(m),r.innerHTML=d&&d.value||d,d&&d.xdebug_link){const g=document.createElement("span");if(g.classList.add(s("filename")),g.textContent=d.xdebug_link.filename+(d.xdebug_link.line?`#${d.xdebug_link.line}`:""),d.xdebug_link){const E=document.createElement("a");E.classList.add(s("editor-link")),d.xdebug_link.ajax?(E.setAttribute("title",d.xdebug_link.url),E.addEventListener("click",()=>{fetch(d.xdebug_link.url)})):E.setAttribute("href",d.xdebug_link.url),g.append(E)}r.append(g)}}}),e=PhpDebugBar.Widgets.TableVariableListWidget=PhpDebugBar.Widget.extend({tagName:"div",className:s("tablevarlist"),render(){this.bindAttr("data",function(n){var E,C,T;if(this.el.innerHTML="",!this.has("data"))return;this.table=document.createElement("table"),this.table.classList.add(s("tablevar")),this.el.append(this.table);const r=document.createElement("tr");r.classList.add(s("header"));const u=document.createElement("td");r.append(u),this.table.append(r);let d=n.key_map||{value:"Value"};Array.isArray(d)&&(d=Object.fromEntries(d.map(w=>[w,null])));for(const[w,_]of Object.entries(d)){const $=document.createElement("td");if($.textContent=_!=null?_:w,r.append($),n.badges&&n.badges[w]){const A=document.createElement("span");A.textContent=n.badges[w],A.classList.add(s("badge")),$.append(A)}}const h=this;if(!n.data)return;for(const[w,_]of Object.entries(n.data)){const $=document.createElement("tr");$.classList.add(s("item")),h.table.append($);const A=document.createElement("td");if(A.classList.add(s("key")),A.textContent=w,$.append(A),typeof _!="object"||_===null){const M=document.createElement("td");M.classList.add(s("value")),M.textContent=_!=null?_:"",$.append(M);continue}for(const M of Object.keys(d)){const S=document.createElement("td");S.classList.add(s("value")),S.textContent=(E=_[M])!=null?E:"",$.append(S)}if(_.xdebug_link){const M=document.createElement("td");M.classList.add(s("editor")),$.append(M);const S=document.createElement("span");S.classList.add(s("filename")),S.textContent=_.xdebug_link.filename+(_.xdebug_link.line?`#${_.xdebug_link.line}`:""),M.append(S);const H=document.createElement("a");H.classList.add(s("editor-link")),_.xdebug_link.ajax?(H.setAttribute("title",_.xdebug_link.url),H.addEventListener("click",()=>{fetch(_.xdebug_link.url)})):H.setAttribute("href",_.xdebug_link.url),S.append(H),n.xdebug_link||(n.xdebug_link=!0,r.append(document.createElement("td")))}}if(!n.summary)return;const m=document.createElement("tr");m.classList.add(s("summary")),h.table.append(m);const g=document.createElement("td");if(g.classList.add(s("key")),m.append(g),typeof n.summary!="object"||n.summary===null){const w=document.createElement("td");w.classList.add(s("value")),w.textContent=(C=n.summary)!=null?C:"",m.append(w)}else for(const w of Object.keys(d)){const _=document.createElement("td");_.classList.add(s("value")),_.textContent=(T=n.summary[w])!=null?T:"",m.append(_)}n.xdebug_link&&m.append(document.createElement("td"))})}}),t=PhpDebugBar.Widgets.IFrameWidget=PhpDebugBar.Widget.extend({tagName:"iframe",className:s("iframe"),render(){this.el.setAttribute("seamless","seamless"),this.el.setAttribute("border","0"),this.el.setAttribute("width","100%"),this.el.setAttribute("height","100%"),this.bindAttr("data",function(n){this.el.setAttribute("src",n)})}}),o=PhpDebugBar.Widgets.MessagesWidget=PhpDebugBar.Widget.extend({className:s("messages"),render(){const n=this;this.list=new f({itemRenderer(u,d){let h;if(d.message_html)h=document.createElement("span"),h.classList.add(s("value")),h.innerHTML=d.message_html,u.append(h);else{let m=d.message;if(m.length>100&&(m=`${m.substr(0,100)}...`),h=document.createElement("span"),h.classList.add(s("value")),h.textContent=m,u.append(h),!d.is_string||d.message.length>100){let g=d.message;d.is_string||(g=null),u.style.cursor="pointer",u.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";h.classList.contains(s("pretty"))?(h.textContent=m,h.classList.remove(s("pretty"))):(g=g||b(d.message,"php"),h.classList.add(s("pretty")),h.innerHTML="",h.append(g))})}}if(d.xdebug_link){const m=document.createElement("span");if(m.classList.add(s("filename")),m.textContent=d.xdebug_link.filename+(d.xdebug_link.line?`#${d.xdebug_link.line}`:""),d.xdebug_link){const g=document.createElement("a");g.classList.add(s("editor-link")),d.xdebug_link.ajax?(g.setAttribute("title",d.xdebug_link.url),g.addEventListener("click",()=>{fetch(d.xdebug_link.url)})):g.setAttribute("href",d.xdebug_link.url),m.append(g)}u.prepend(m)}if(d.collector){const m=document.createElement("span");m.classList.add(s("collector")),m.textContent=d.collector,u.prepend(m)}if(d.label){h.classList.add(s(d.label));const m=document.createElement("span");m.classList.add(s("label")),m.textContent=d.label,u.prepend(m)}}}),this.el.append(this.list.el),this.toolbar=document.createElement("div"),this.toolbar.classList.add(s("toolbar")),this.toolbar.innerHTML='<i class="phpdebugbar-icon phpdebugbar-icon-search"></i>',this.el.append(this.toolbar);const r=document.createElement("input");r.type="text",r.name="search",r.setAttribute("aria-label","Search"),r.placeholder="Search",r.addEventListener("change",function(){n.set("search",this.value)}),this.toolbar.append(r),this.bindAttr("data",function(u){this.set({excludelabel:[],excludecollector:[],search:""});const d=this.toolbar.querySelectorAll(`.${s("filter")}`);for(const T of d)T.remove();const h=[],m=[],g=this,E=function(T,w){const _=document.createElement("a");_.classList.add(s("filter")),_.classList.add(s(T)),_.textContent=w,_.setAttribute("rel",w),_.addEventListener("click",function(){g.onFilterClick(this,T)}),g.toolbar.append(_)};if(u.forEach(T=>{h.includes(T.label||"none")||h.push(T.label||"none"),m.includes(T.collector||"none")||m.push(T.collector||"none")}),h.length>1&&h.forEach(T=>E("label",T)),m.length===1)return;const C=document.createElement("a");C.classList.add(s("filter")),C.style.visibility="hidden",g.toolbar.append(C),m.forEach(T=>E("collector",T))}),this.bindAttr(["excludelabel","excludecollector","search"],function(){const u=this.get("excludelabel")||[],d=this.get("excludecollector")||[],h=this.get("search");let m=!1;const g=[];h&&h===h.toLowerCase()&&(m=!0),this.get("data").forEach(E=>{const C=m?E.message.toLowerCase():E.message;!u.includes(E.label||void 0)&&!d.includes(E.collector||void 0)&&(!h||C.includes(h))&&g.push(E)}),this.list.set("data",g)})},onFilterClick(n,r){n.classList.toggle(s("excluded"));const u=[],d=`.${s("filter")}.${s("excluded")}.${s(r)}`,h=this.toolbar.querySelectorAll(d);for(const m of h)u.push(m.rel==="none"||!m.rel?void 0:m.rel);this.set(`exclude${r}`,u)}}),p=PhpDebugBar.Widgets.TimelineWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:s("timeline"),render(){this.bindAttr("data",function(n){const r=function(d){return d<.001?`${(d*1e6).toFixed()}\u03BCs`:d<.1?`${(d*1e3).toFixed(2)}ms`:d<1?`${(d*1e3).toFixed()}ms`:`${d.toFixed(2)}s`},u=function(h){if(h===0||h===null)return"0B";const m=h<0?"-":"",g=Math.abs(h),E=Math.log(g)/Math.log(1024),C=["B","KB","MB","GB","TB"];return m+Math.round(N(1024,E-Math.floor(E))*100)/100+C[Math.floor(E)]};if(this.el.innerHTML="",n.measures){let d={};for(let g=0;g<n.measures.length;g++){const E=n.measures[g],C=E.group||E.label;d[C]||(d[C]={count:0,duration:0,memory:0}),d[C].count+=1,d[C].duration+=E.duration,d[C].memory+=E.memory||0;const T=document.createElement("div");T.classList.add(s("measure"));const w=document.createElement("li"),_=(E.relative_start*100/n.duration).toFixed(2),$=Math.min((E.duration*100/n.duration).toFixed(2),100-_),A=document.createElement("span");A.classList.add(s("value")),A.style.left=`${_}%`,A.style.width=`${$}%`,T.append(A);const M=document.createElement("span");if(M.classList.add(s("label")),M.textContent=E.label.replace(/\s+/g," ")+(E.duration?` (${E.duration_str}${E.memory?`/${E.memory_str}`:""})`:""),T.append(M),E.collector){const S=document.createElement("span");S.classList.add(s("collector")),S.textContent=E.collector,T.append(S)}if(w.append(T),this.el.append(w),E.params&&Object.keys(E.params).length>0){const S=document.createElement("table");S.classList.add(s("params")),S.style.display="none",S.innerHTML='<tr><th colspan="2">Params</th></tr>';for(const H in E.params)if(typeof E.params[H]!="function"){const D=document.createElement("tr");D.innerHTML=`<td class="${s("name")}">${H}</td><td class="${s("value")}"><pre><code>${E.params[H]}</code></pre></td>`,S.append(D)}w.append(S),w.style.cursor="pointer",w.addEventListener("click",function(){if(window.getSelection().type==="Range")return"";const H=this.querySelector("table");H.style.display!=="none"?H.style.display="none":H.style.display=""}),w.addEventListener("click",H=>{H.target.closest(".sf-dump")&&H.stopPropagation()})}}d=Object.entries(d).map(([g,E])=>({label:g,data:E})).sort((g,E)=>E.data.duration-g.data.duration);const h=document.createElement("table");h.classList.add(s("params"));for(const g of d){const E=Math.min((g.data.duration*100/n.duration).toFixed(2),100),C=document.createElement("i");C.textContent=g.label.replace(/\s+/g," ");const T=C.innerHTML,w=document.createElement("tr");w.innerHTML=`<td class="${s("name")}">${g.data.count} x ${T} (${E}%)</td><td class="${s("value")}"><div class="${s("measure")}"><span class="${s("value")}"></span><span class="${s("label")}">${r(g.data.duration)}${g.data.memory?`/${u(g.data.memory)}`:""}</span></div></td>`,h.append(w);const _=w.querySelector(`span.${s("value")}`);_.style.width=`${E}%`}const m=document.createElement("li");m.append(h),this.el.append(m)}})}}),y=PhpDebugBar.Widgets.ExceptionsWidget=PhpDebugBar.Widget.extend({className:s("exceptions"),render(){this.list=new f({itemRenderer(n,r){const u=document.createElement("span");if(u.classList.add(s("message")),u.textContent=r.message,r.count>1){const d=document.createElement("span");d.classList.add(s("badge")),d.textContent=`${r.count}x`,u.prepend(d)}if(n.append(u),r.file){const d=document.createElement("span");if(d.classList.add(s("filename")),d.textContent=`${r.file}#${r.line}`,r.xdebug_link){const h=document.createElement("a");h.classList.add(s("editor-link")),r.xdebug_link.ajax?(h.setAttribute("title",r.xdebug_link.url),h.addEventListener("click",()=>{fetch(r.xdebug_link.url)})):h.setAttribute("href",r.xdebug_link.url),d.append(h)}n.append(d)}if(r.type){const d=document.createElement("span");d.classList.add(s("type")),d.textContent=r.type,n.append(d)}if(r.surrounding_lines){const d=r.line-3<=0?1:r.line-3,h=b(r.surrounding_lines.join(""),"php",d,r.line);h.classList.add(s("file")),n.append(h),r.stack_trace_html||n.addEventListener("click",()=>{h.style.display!=="none"?h.style.display="none":h.style.display=""})}if(r.stack_trace_html){const d=document.createElement("span");d.classList.add(s("filename")),d.innerHTML=r.stack_trace_html;const h=d.querySelectorAll('samp[data-depth="1"]');for(const m of h){m.classList.remove("sf-dump-expanded"),m.classList.add("sf-dump-compact");const g=m.parentElement.querySelector(">.sf-dump-note");g&&(g.innerHTML=g.innerHTML.replace(/^array:/,'<span class="sf-dump-key">Stack Trace:</span> ')+" files")}n.append(d)}else r.stack_trace&&r.stack_trace.split(`
`).forEach(d=>{const h=document.createElement("div"),m=document.createElement("span");m.classList.add(s("filename")),m.textContent=d,h.append(m),n.append(h)})}}),this.el.append(this.list.el),this.bindAttr("data",function(n){if(this.list.set("data",n),n.length===1){const r=this.list.el.children[0];if(r){const u=r.querySelector(`.${s("file")}`);u&&(u.style.display="")}}})}}),k=PhpDebugBar.Widgets.DatasetWidget=PhpDebugBar.Widget.extend({initialize(n){n.itemRenderer||(n.itemRenderer=this.itemRenderer),this.set(n),this.set("autoshow",null),this.set("id",null),this.set("sort",localStorage.getItem("debugbar-history-sort")||"asc"),this.el.classList.add(s("dataset-history")),this.renderHead()},renderHead(){this.el.innerHTML="",this.actions=document.createElement("div"),this.actions.classList.add(s("dataset-actions")),this.el.append(this.actions);const n=this,r=n.get("debugbar");this.autoshow=document.createElement("input"),this.autoshow.type="checkbox",this.autoshow.addEventListener("click",function(){r.ajaxHandler&&r.ajaxHandler.setAutoShow(this.checked),r.controls.__settings&&r.controls.__settings.get("widget").set("autoshow",this.autoShow)});const u=document.createElement("label");u.textContent="Autoshow",u.append(this.autoshow),this.actions.append(u),this.clearbtn=document.createElement("a"),this.clearbtn.textContent="Clear",this.actions.append(this.clearbtn),this.clearbtn.addEventListener("click",()=>{n.table.innerHTML=""}),this.showBtn=document.createElement("a"),this.showBtn.textContent="Show all",this.actions.append(this.showBtn),this.showBtn.addEventListener("click",()=>{n.searchInput.value=null,n.methodInput.value=null,n.set("search",null),n.set("method",null)}),this.methodInput=document.createElement("select"),this.methodInput.name="method",this.methodInput.style.width="100px",this.methodInput.innerHTML="<option>(method)</option><option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option>",this.methodInput.addEventListener("change",function(){n.set("method",this.value)}),this.actions.append(this.methodInput),this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.name="search",this.searchInput.setAttribute("aria-label","Search"),this.searchInput.placeholder="Search",this.searchInput.addEventListener("input",function(){n.set("search",this.value)}),this.actions.append(this.searchInput),this.table=document.createElement("tbody");const d=document.createElement("table"),h=document.createElement("thead"),m=document.createElement("tr"),g=document.createElement("th");g.style.width="30px",m.append(g);const E=document.createElement("th");E.textContent="Date \u2195",E.style.width="175px",E.addEventListener("click",()=>{n.set("sort",n.get("sort")==="asc"?"desc":"asc"),localStorage.setItem("debugbar-history-sort",n.get("sort"))}),m.append(E);const C=document.createElement("th");C.textContent="Method",C.style.width="80px",m.append(C);const T=document.createElement("th");T.textContent="URL",m.append(T);const w=document.createElement("th");w.setAttribute("width","40%"),w.textContent="Data",m.append(w),h.append(m),d.append(h),d.append(this.table),this.el.append(d)},renderDatasets(){this.table.innerHTML="";const n=this,r=this.get("data");if(r)for(const[u,d]of Object.entries(r))d.__meta&&n.get("itemRenderer")(n,d)},render(){this.bindAttr("data",function(){if(this.get("autoshow")===null&&this.get("debugbar").ajaxHandler&&this.set("autoshow",this.get("debugbar").ajaxHandler.autoShow),!this.has("data"))return;const n=this.get("data"),r=n[Object.keys(n)[Object.keys(n).length-1]];r.__meta&&this.get("itemRenderer")(this,r)}),this.bindAttr(["itemRenderer","search","method","sort"],function(){this.renderDatasets()}),this.bindAttr("autoshow",function(){const n=this.get("autoshow");this.autoshow.checked=n}),this.bindAttr("id",function(){const n=this.get("id"),r=s("active"),u=this.table.querySelectorAll(`.${r}`);for(const h of u)h.classList.remove(r);const d=this.table.querySelector(`tr[data-id="${n}"]`);d&&d.classList.add(r)})},itemRenderer(n,r){const u=r.__meta,d=document.createElement("td"),h=document.createElement("tr");n.get("sort")==="asc"?n.table.append(h):n.table.prepend(h);const m=function(){const A=n.get("debugbar");A.showDataSet(u.id,A.datesetTitleFormater.format("",r,u.suffix,u.nb));const M=s("active"),S=n.table.querySelectorAll(`.${M}`);for(const D of S)D.classList.remove(M);h.classList.add(M);const H=this.dataset.tab;H&&A.showTab(H)};h.setAttribute("data-id",u.id),h.style.cursor="pointer",h.classList.add(s("table-row"));const g=document.createElement("td");g.textContent=`#${u.nb}`,g.addEventListener("click",m),h.append(g);const E=document.createElement("td");E.textContent=u.datetime,E.addEventListener("click",m),h.append(E);const C=document.createElement("td");C.textContent=u.method,C.addEventListener("click",m),h.append(C);const T=document.createElement("td");T.textContent=u.uri+(u.suffix?` ${u.suffix}`:""),T.addEventListener("click",m),h.append(T);const w=n.get("debugbar");for(let[A,M]of Object.entries(w.dataMap)){const S=a(r,M[0],M[1]);if(A.includes(":")){const H=A.split(":");A=H[0];const D=H[1];if(D==="badge"&&S>0){const j=w.getControl(A),B=document.createElement("a");if(B.setAttribute("title",j.get("title")),B.dataset.tab=A,j.icon&&B.append(j.icon.cloneNode(!0)),j.badge){const I=j.badge.cloneNode(!0);I.style.display="inline-block",I.textContent=S,B.append(I)}d.append(B),B.addEventListener("click",m)}else D==="tooltip"&&w.getControl(A).set("tooltip",S)}}h.append(d),w.activeDatasetId===u.id&&h.classList.add(s("active"));const _=n.get("search"),$=n.get("method");(_&&!u.uri.includes(_)||$&&u.method!==$)&&(h.style.display="none")}})})();(function(){const s=function(x){return PhpDebugBar.utils.csscls(x,"phpdebugbar-openhandler-")};PhpDebugBar.OpenHandler=PhpDebugBar.Widget.extend({className:"phpdebugbar-openhandler",defaults:{items_per_page:20},render(){const x=this;document.body.append(this.el),this.el.style.display="none",this.closebtn=document.createElement("a"),this.closebtn.innerHTML='<i class="phpdebugbar-icon phpdebugbar-icon-x"></i>',this.table=document.createElement("tbody");const i=document.createElement("div");i.classList.add(s("header")),i.textContent="PHP DebugBar | Open",i.append(this.closebtn),this.el.append(i);const l=document.createElement("table");l.innerHTML='<thead><tr><th width="155">Date</th><th width="75">Method</th><th>URL</th><th width="125">IP</th><th width="100">Filter data</th></tr></thead>',l.append(this.table),this.el.append(l),this.actions=document.createElement("div"),this.actions.classList.add(s("actions")),this.el.append(this.actions),this.closebtn.addEventListener("click",()=>{x.hide()}),this.loadmorebtn=document.createElement("a"),this.loadmorebtn.textContent="Load more",this.actions.append(this.loadmorebtn),this.loadmorebtn.addEventListener("click",()=>{x.find(x.last_find_request,x.last_find_request.offset+x.get("items_per_page"),x.handleFind.bind(x))}),this.showonlycurrentbtn=document.createElement("a"),this.showonlycurrentbtn.textContent="Show only current URL",this.actions.append(this.showonlycurrentbtn),this.showonlycurrentbtn.addEventListener("click",()=>{x.table.innerHTML="",x.find({uri:window.location.pathname},0,x.handleFind.bind(x))}),this.showallbtn=document.createElement("a"),this.showallbtn.textContent="Show all",this.actions.append(this.showallbtn),this.showallbtn.addEventListener("click",()=>{x.refresh()}),this.clearbtn=document.createElement("a"),this.clearbtn.textContent="Delete all",this.actions.append(this.clearbtn),this.clearbtn.addEventListener("click",()=>{x.clear(()=>{x.hide()})}),this.addSearch(),this.overlay=document.createElement("div"),this.overlay.classList.add(s("overlay")),this.overlay.style.display="none",document.body.append(this.overlay),this.overlay.addEventListener("click",()=>{x.hide()})},refresh(){this.table.innerHTML="",this.loadmorebtn.style.display="",this.find({},0,this.handleFind.bind(this))},addSearch(){const x=this,i=document.createElement("button");i.textContent="Search",i.type="submit",i.addEventListener("click",function(f){x.table.innerHTML="";const c={},v=new FormData(this.parentElement);for(const[L,e]of v.entries())e&&(c[L]=e);x.find(c,0,x.handleFind.bind(x)),f.preventDefault()});const l=document.createElement("form");l.innerHTML='<br/><b>Filter results</b><br/><select name="method"><option selected>(Method)</option><option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option></select>';const b=document.createElement("input");b.type="text",b.name="uri",b.placeholder="URI",l.append(b);const a=document.createElement("input");a.type="text",a.name="ip",a.placeholder="IP",l.append(a),l.append(i),this.actions.append(l)},handleFind(x){const i=this;for(const l of x){const b=document.createElement("a");b.textContent="Load dataset",b.addEventListener("click",k=>{i.hide(),i.load(l.id,n=>{i.callback(l.id,n)}),k.preventDefault()});const a=document.createElement("a");a.textContent=l.method,a.addEventListener("click",k=>{i.table.innerHTML="",i.find({method:l.method},0,i.handleFind.bind(i)),k.preventDefault()});const f=document.createElement("a");f.textContent=l.uri,f.addEventListener("click",k=>{i.hide(),i.load(l.id,n=>{i.callback(l.id,n)}),k.preventDefault()});const c=document.createElement("a");c.textContent=l.ip,c.addEventListener("click",k=>{i.table.innerHTML="",i.find({ip:l.ip},0,i.handleFind.bind(i)),k.preventDefault()});const v=document.createElement("a");v.textContent="Show URL",v.addEventListener("click",k=>{i.table.innerHTML="",i.find({uri:l.uri},0,i.handleFind.bind(i)),k.preventDefault()});const L=document.createElement("tr"),e=document.createElement("td");e.textContent=l.datetime,L.append(e);const t=document.createElement("td");t.textContent=l.method,L.append(t);const o=document.createElement("td");o.append(f),L.append(o);const p=document.createElement("td");p.append(c),L.append(p);const y=document.createElement("td");y.append(v),L.append(y),i.table.append(L)}x.length<this.get("items_per_page")&&(this.loadmorebtn.style.display="none")},show(x){this.callback=x,this.el.style.display="block",this.overlay.style.display="block",this.refresh()},hide(){this.el.style.display="none",this.overlay.style.display="none"},find(x,i,l){const b=Object.assign({},x,{max:this.get("items_per_page"),offset:i||0});this.last_find_request=b,this.ajax(b,l)},load(x,i){this.ajax({op:"get",id:x},i)},clear(x){this.ajax({op:"clear"},x)},ajax(x,i){let l=this.get("url");x&&(l=l+(l.includes("?")?"&":"?")+new URLSearchParams(x)),fetch(l,{method:"GET",headers:{Accept:"application/json"}}).then(b=>b.json()).then(i)}})})();(function(){const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),x=PhpDebugBar.Widgets.SQLQueriesWidget=PhpDebugBar.Widget.extend({className:s("sqlqueries"),onFilterClick(i){i.classList.toggle(s("excluded"));const l=i.getAttribute("rel"),b=this.list.el.querySelectorAll(`li[connection="${l}"]`);for(const a of b)a.style.display=a.style.display==="none"?"":"none"},onCopyToClipboard(i){const l=i.parentElement.querySelector("code"),b=function(){try{document.execCommand("copy")&&(i.classList.add(s("copy-clipboard-check")),setTimeout(()=>{i.classList.remove(s("copy-clipboard-check"))},2e3))}catch(f){console.log("Oops, unable to copy")}};(function(f){if(document.selection){const c=document.body.createTextRange();c.moveToElementText(f),c.select()}else if(window.getSelection){const c=document.createRange();c.selectNodeContents(f),window.getSelection().removeAllRanges(),window.getSelection().addRange(c)}b(),window.getSelection().removeAllRanges()})(l)},renderList(i,l,b){const a=document.createElement("ul");a.classList.add(s("table-list"));for(const L in b){const e=typeof b[L]=="function"?`${b[L].name} {}`:b[L],t=document.createElement("li");if(t.classList.add(s("table-list-item")),typeof e=="object"&&e!==null){const o=document.createElement("span");if(o.classList.add("phpdebugbar-text-muted"),o.textContent=e.index||L,o.append("."),t.append(o),t.append("\xA0"),e.namespace&&t.append(`${e.namespace}::`),t.append(e.name||e.file),e.line){const p=document.createElement("span");p.classList.add("phpdebugbar-text-muted"),p.textContent=`:${e.line}`,t.append(p)}}else{const o=document.createElement("span");o.classList.add("phpdebugbar-text-muted"),o.textContent=`${L}:`,t.append(o),t.append("\xA0");const p=document.createElement("span");p.classList.add("phpdebugbar-text-muted"),p.textContent=e,t.append(p.innerHTML)}a.append(t)}i+=l?` <i class="phpdebugbar-fa phpdebugbar-fa-${l} phpdebugbar-text-muted"></i>`:"";const f=document.createElement("tr"),c=document.createElement("td");c.classList.add(s("name")),c.innerHTML=i,f.append(c);const v=document.createElement("td");return v.classList.add(s("value")),v.append(a),f.append(v),f},render(){this.status=document.createElement("div"),this.status.classList.add(s("status")),this.el.append(this.status),this.toolbar=document.createElement("div"),this.toolbar.classList.add(s("toolbar")),this.el.append(this.toolbar);let i=[];const l=this;this.list=new PhpDebugBar.Widgets.ListWidget({itemRenderer(b,a){if(a.slow&&b.classList.add(s("sql-slow")),a.width_percent){const c=document.createElement("div");c.classList.add(s("bg-measure"));const v=document.createElement("div");v.classList.add(s("value")),v.style.left=`${a.start_percent}%`,v.style.width=`${Math.max(a.width_percent,.01)}%`,c.append(v),b.append(c)}if(a.duration_str){const c=document.createElement("span");c.setAttribute("title","Duration"),c.classList.add(s("duration")),c.textContent=a.duration_str,b.append(c)}if(a.memory_str){const c=document.createElement("span");c.setAttribute("title","Memory usage"),c.classList.add(s("memory")),c.textContent=a.memory_str,b.append(c)}if(typeof a.row_count!="undefined"){const c=document.createElement("span");c.setAttribute("title","Row count"),c.classList.add(s("row-count")),c.textContent=a.row_count,b.append(c)}if(typeof a.stmt_id!="undefined"&&a.stmt_id){const c=document.createElement("span");c.setAttribute("title","Prepared statement ID"),c.classList.add(s("stmt-id")),c.textContent=a.stmt_id,b.append(c)}if(a.connection){const c=document.createElement("span");if(c.setAttribute("title","Connection"),c.classList.add(s("database")),c.textContent=a.connection,b.append(c),b.setAttribute("connection",a.connection),!i.includes(a.connection)){i.push(a.connection);const v=document.createElement("a");v.classList.add(s("filter")),v.textContent=a.connection,v.setAttribute("rel",a.connection),v.addEventListener("click",function(){l.onFilterClick(this)}),l.toolbar.append(v),i.length>1&&(l.toolbar.style.display="",l.list.el.style.marginBottom="20px")}}if(!a.type||a.type==="query"){const c=document.createElement("span");c.setAttribute("title","Copy to clipboard"),c.classList.add(s("copy-clipboard")),c.style.cursor="pointer",c.innerHTML="&#8203;",c.addEventListener("click",function(v){l.onCopyToClipboard(this),v.stopPropagation()}),b.append(c)}if(typeof a.xdebug_link!="undefined"&&a.xdebug_link){const c=document.createElement("span");c.setAttribute("title","Filename"),c.classList.add(s("filename")),c.textContent=a.xdebug_link.filename+(a.xdebug_link.line?`#${a.xdebug_link.line}`:"");const v=document.createElement("a");v.setAttribute("href",a.xdebug_link.url),v.classList.add(s("editor-link")),v.addEventListener("click",L=>{L.stopPropagation(),a.xdebug_link.ajax&&(fetch(a.xdebug_link.url),L.preventDefault())}),c.append(v),b.append(c)}if(a.type==="transaction"){const c=document.createElement("strong");c.classList.add(s("sql"),s("name")),c.textContent=a.sql,b.append(c)}else{const c=document.createElement("code");c.classList.add(s("sql")),c.innerHTML=PhpDebugBar.Widgets.highlight(a.sql,"sql"),b.append(c)}if(typeof a.is_success!="undefined"&&!a.is_success){b.classList.add(s("error"));const c=document.createElement("span");c.classList.add(s("error")),c.textContent=`[${a.error_code}] ${a.error_message}`,b.append(c)}const f=document.createElement("table");f.classList.add(s("params")),a.params&&Object.keys(a.params).length>0&&f.append(l.renderList("Params","thumb-tack",a.params)),a.bindings&&Object.keys(a.bindings).length>0&&f.append(l.renderList("Bindings","thumb-tack",a.bindings)),a.hints&&Object.keys(a.hints).length>0&&f.append(l.renderList("Hints","question-circle",a.hints)),a.backtrace&&Object.keys(a.backtrace).length>0&&f.append(l.renderList("Backtrace","list-ul",a.backtrace)),f.querySelectorAll("tr").length&&(b.append(f),b.style.cursor="pointer",b.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";f.style.display!=="none"?f.style.display="none":f.style.display=""}))}}),this.el.append(this.list.el),this.bindAttr("data",function(b){if(b.length<=0||!b.statements)return!1;i=[],this.toolbar.style.display="none";const a=this.toolbar.querySelectorAll(`.${s("filter")}`);for(const L of a)L.remove();this.list.set("data",b.statements),this.status.innerHTML="";const f={};let c=0;for(let L=0;L<b.statements.length;L++){if(b.statements[L].type&&b.statements[L].type!=="query")continue;let e=b.statements[L].sql;b.statements[L].params&&Object.keys(b.statements[L].params).length>0&&(e+=JSON.stringify(b.statements[L].params)),b.statements[L].bindings&&Object.keys(b.statements[L].bindings).length>0&&(e+=JSON.stringify(b.statements[L].bindings)),b.statements[L].connection&&(e+=`@${b.statements[L].connection}`),f[e]=f[e]||{keys:[]},f[e].keys.push(L)}for(const L in f)if(f[L].keys.length>1){c+=f[L].keys.length;for(let e=0;e<f[L].keys.length;e++){const t=this.list.el.querySelectorAll(`.${s("list-item")}`);t[f[L].keys[e]]&&t[f[L].keys[e]].classList.add(s("sql-duplicate"))}}const v=document.createElement("span");if(v.textContent=`${b.nb_statements} statements were executed`,this.status.append(v),b.nb_failed_statements&&v.append(`, ${b.nb_failed_statements} of which failed`),c){v.append(`, ${c} of which were duplicates`),v.append(`, ${b.nb_statements-c} unique. `);const L="Show only duplicated",e=document.createElement("a");e.classList.add(s("duplicates")),e.textContent=L,e.addEventListener("click",function(){this.classList.toggle("shown-duplicated"),this.textContent=this.classList.contains("shown-duplicated")?"Show All":L;const t=`.${l.className} .${s("list-item")}:not(.${s("sql-duplicate")})`,o=document.querySelectorAll(t);for(const p of o)p.style.display=p.style.display==="none"?"":"none"}),v.append(e)}if(b.accumulated_duration_str){const L=document.createElement("span");L.setAttribute("title","Accumulated duration"),L.classList.add(s("duration")),L.textContent=b.accumulated_duration_str,this.status.append(L)}if(b.memory_usage_str){const L=document.createElement("span");L.setAttribute("title","Memory usage"),L.classList.add(s("memory")),L.textContent=b.memory_usage_str,this.status.append(L)}})}})})();(function(){const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),x=PhpDebugBar.Widgets.TemplatesWidget=PhpDebugBar.Widget.extend({className:s("templates"),render(){this.status=document.createElement("div"),this.status.classList.add(s("status")),this.el.append(this.status),this.list=new PhpDebugBar.Widgets.ListWidget({itemRenderer(i,l){const b=document.createElement("span");if(b.classList.add(s("name")),l.html?b.innerHTML=l.html:b.textContent=l.name,i.append(b),typeof l.xdebug_link!="undefined"&&l.xdebug_link!==null){const a=document.createElement("span");if(a.classList.add(s("filename")),a.textContent=l.xdebug_link.filename+(l.xdebug_link.line?`#${l.xdebug_link.line}`:""),l.xdebug_link){const f=document.createElement("a");f.setAttribute("href",l.xdebug_link.url),f.classList.add(s("editor-link")),f.addEventListener("click",c=>{c.stopPropagation(),l.xdebug_link.ajax&&(fetch(l.xdebug_link.url),c.preventDefault())}),a.append(f)}i.append(a)}if(l.render_time_str){const a=document.createElement("span");a.setAttribute("title","Render time"),a.classList.add(s("render-time")),a.textContent=l.render_time_str,i.append(a)}if(l.memory_str){const a=document.createElement("span");a.setAttribute("title","Memory usage"),a.classList.add(s("memory")),a.textContent=l.memory_str,i.append(a)}if(typeof l.param_count!="undefined"){const a=document.createElement("span");a.setAttribute("title","Parameter count"),a.classList.add(s("param-count")),a.textContent=l.param_count,i.append(a)}if(typeof l.type!="undefined"&&l.type){const a=document.createElement("span");a.setAttribute("title","Type"),a.classList.add(s("type")),a.textContent=l.type,i.append(a)}if(typeof l.editorLink!="undefined"&&l.editorLink){const a=document.createElement("a");a.setAttribute("href",l.editorLink),a.classList.add(s("editor-link")),a.textContent="file",a.addEventListener("click",f=>{f.stopPropagation()}),i.append(a)}if(l.params&&Object.keys(l.params).length>0){const a=document.createElement("table");a.classList.add(s("params")),a.innerHTML='<tr><th colspan="2">Params</th></tr>';for(const f in l.params)if(typeof l.params[f]!="function"){const c=document.createElement("tr");c.innerHTML=`<td class="${s("name")}">${f}</td><td class="${s("value")}"><pre><code>${l.params[f]}</code></pre></td>`,a.append(c)}i.append(a),i.style.cursor="pointer",i.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";a.style.display!=="none"?a.style.display="none":a.style.display=""})}}}),this.el.append(this.list.el),this.callgraph=document.createElement("div"),this.callgraph.classList.add(s("callgraph")),this.el.append(this.callgraph),this.bindAttr("data",function(i){this.list.set("data",i.templates),this.status.innerHTML="",this.callgraph.innerHTML="";const l=i.sentence||"templates were rendered",b=document.createElement("span");if(b.textContent=`${i.nb_templates} ${l}`,this.status.append(b),i.accumulated_render_time_str){const a=document.createElement("span");a.setAttribute("title","Accumulated render time"),a.classList.add(s("render-time")),a.textContent=i.accumulated_render_time_str,this.status.append(a)}if(i.memory_usage_str){const a=document.createElement("span");a.setAttribute("title","Memory usage"),a.classList.add(s("memory")),a.textContent=i.memory_usage_str,this.status.append(a)}if(i.nb_blocks>0){const a=document.createElement("div");a.textContent=`${i.nb_blocks} blocks were rendered`,this.status.append(a)}if(i.nb_macros>0){const a=document.createElement("div");a.textContent=`${i.nb_macros} macros were rendered`,this.status.append(a)}typeof i.callgraph!="undefined"&&(this.callgraph.innerHTML=i.callgraph)})}})})();(function(){const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),x=PhpDebugBar.Widgets.MailsWidget=PhpDebugBar.Widget.extend({className:s("mails"),render(){this.list=new PhpDebugBar.Widgets.ListWidget({itemRenderer(i,l){const b=document.createElement("span");b.classList.add(s("subject")),b.textContent=l.subject,i.append(b);const a=document.createElement("span");if(a.classList.add(s("to")),a.textContent=l.to,i.append(a),l.body||l.html){const f=document.createElement("span");f.classList.add(s("filename")),f.textContent="";const c=document.createElement("a");c.setAttribute("title","Mail Preview"),c.textContent="View Mail",c.classList.add(s("editor-link")),c.addEventListener("click",()=>{const L=window.open("about:blank","Mail Preview","width=650,height=440,scrollbars=yes").document;let e="";if(l.headers){const y=document.createElement("pre");y.style.border="1px solid #ddd",y.style.padding="5px";const k=document.createElement("code");k.textContent=l.headers,y.append(k),e=y.outerHTML}const t=document.createElement("pre");t.style.border="1px solid #ddd",t.style.padding="5px",t.textContent=l.body;let o=t.outerHTML,p="";if(l.html){const y=document.createElement("details"),k=document.createElement("summary");k.textContent="Text version",y.append(k),y.append(t),o=y.outerHTML;const n=document.createElement("iframe");n.setAttribute("width","100%"),n.setAttribute("height","400px"),n.setAttribute("sandbox",""),n.setAttribute("referrerpolicy","no-referrer"),n.setAttribute("srcdoc",l.html),p=n.outerHTML}L.open(),L.write(e+o+p),L.close()}),f.append(c),i.append(f)}if(l.headers){const f=document.createElement("pre");f.classList.add(s("headers"));const c=document.createElement("code");c.textContent=l.headers,f.append(c),i.append(f),i.addEventListener("click",()=>{f.style.display!=="none"?f.style.display="none":f.style.display=""})}}}),this.el.append(this.list.el),this.bindAttr("data",function(i){this.list.set("data",i)})}})})();})();
