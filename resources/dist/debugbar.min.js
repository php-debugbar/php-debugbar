(()=>{var z=Object.defineProperty;var W=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var N=Math.pow,R=(s,l,d)=>l in s?z(s,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[l]=d,j=(s,l)=>{for(var d in l||(l={}))O.call(l,d)&&R(s,d,l[d]);if(W)for(var d of W(l))F.call(l,d)&&R(s,d,l[d]);return s};typeof PhpDebugBar=="undefined"&&(window.PhpDebugBar={});(function(){typeof PhpDebugBar.utils=="undefined"&&(PhpDebugBar.utils={});const s=PhpDebugBar.utils.getDictValue=function(e,t,n){if(e==null)return n;const u=String(t).split(".");let f=e;for(const k of u)if(f==null||(f=f[k],f===void 0))return n;return f};PhpDebugBar.utils.csscls=function(e,t){const n=String(e).trim();return n.includes(" ")?n.split(/\s+/).filter(Boolean).map(u=>PhpDebugBar.utils.csscls(u,t)).join(" "):n.startsWith(".")?`.${t}${n.slice(1)}`:t+n},PhpDebugBar.utils.makecsscls=function(e){return t=>PhpDebugBar.utils.csscls(t,e)};const l=PhpDebugBar.utils.makecsscls("phpdebugbar-");class d{constructor(t={}){this._attributes=j({},this.defaults),this._boundAttributes={},this.el=document.createElement(this.tagName),this.className&&this.el.classList.add(...this.className.split(" ")),this.initialize(t),this.render()}initialize(t){this.set(t)}render(){}set(t,n){if(typeof t!="string"){for(const u in t)this.set(u,t[u]);return}if(this._attributes[t]=n,this._boundAttributes[t])for(const u of this._boundAttributes[t])u.call(this,n)}has(t){return this._attributes[t]!==void 0&&this._attributes[t]!==null}get(t){return this._attributes[t]}bindAttr(t,n){if(Array.isArray(t)){for(const u of t)this.bindAttr(u,n);return}if(this._boundAttributes[t]||(this._boundAttributes[t]=[]),n instanceof HTMLElement){const u=n;n=f=>u.textContent=f||""}this._boundAttributes[t].push(n),this.has(t)&&n.call(this,this._attributes[t])}static extend(t){const n=this;class u extends n{}return Object.assign(u.prototype,t),Object.assign(u,n),u.__super__=n.prototype,u}}d.prototype.tagName="div",d.prototype.className=null,d.prototype.defaults={},PhpDebugBar.Widget=d;const c=d.extend({className:l("panel"),render(){this.tab=document.createElement("a"),this.tab.classList.add(l("tab")),this.icon=document.createElement("i"),this.tab.append(this.icon),this.bindAttr("icon",function(t){t?this.icon.className=`phpdebugbar-icon phpdebugbar-icon-${t}`:this.icon.className=""});const e=document.createElement("span");e.classList.add(l("text")),this.tab.append(e),this.bindAttr("title",e),this.badge=document.createElement("span"),this.badge.classList.add(l("badge")),this.tab.append(this.badge),this.bindAttr("badge",function(t){t!==null?(this.badge.textContent=t,this.badge.classList.add(l("visible"))):this.badge.classList.remove(l("visible"))}),this.bindAttr("widget",function(t){this.el.innerHTML="",this.el.append(t.el)}),this.bindAttr("data",function(t){this.has("widget")&&(this.get("widget").set("data",t),this.tab.setAttribute("data-empty",Object.keys(t).length===0||t.count===0))})}}),b=d.extend({tagName:"span",className:l("indicator"),render(){this.icon=document.createElement("i"),this.el.append(this.icon),this.bindAttr("icon",function(t){t?this.icon.className=`phpdebugbar-icon phpdebugbar-icon-${t}`:this.icon.className=""}),this.bindAttr("link",function(t){t?(this.el.addEventListener("click",()=>{this.get("debugbar").showTab(t)}),this.el.style.cursor="pointer"):this.el.style.cursor=""});const e=document.createElement("span");e.classList.add(l("text")),this.el.append(e),this.bindAttr(["title","data"],e),this.tooltip=document.createElement("span"),this.tooltip.classList.add(l("tooltip"),l("disabled")),this.el.append(this.tooltip),this.bindAttr("tooltip",function(t){if(t)if(Array.isArray(t)||typeof t=="object"){const n=document.createElement("dl");for(const[u,f]of Object.entries(t)){const k=document.createElement("dt");k.textContent=u,n.append(k);const x=document.createElement("dd");x.textContent=f,n.append(x)}this.tooltip.innerHTML="",this.tooltip.append(n),this.tooltip.classList.remove(l("disabled"))}else this.tooltip.textContent=t,this.tooltip.classList.remove(l("disabled"));else this.tooltip.classList.add(l("disabled"))})}}),a=d.extend({tagName:"form",className:l("settings"),settings:{},initialize(e){this.set(e);const t=this.get("debugbar");this.settings=JSON.parse(localStorage.getItem("phpdebugbar-settings"))||{};for(const n in t.options)n in this.settings&&(t.options[n]=this.settings[n]),n==="theme"?t.setTheme(t.options[n]):t.el.setAttribute(`data-${n}`,t.options[n])},clearSettings(){const e=this.get("debugbar");if(localStorage.removeItem("phpdebugbar-settings"),localStorage.removeItem("phpdebugbar-ajaxhandler-autoshow"),this.settings={},e.options=j({},e.defaultOptions),e.ajaxHandler){const t=e.ajaxHandler.defaultAutoShow;e.ajaxHandler.setAutoShow(t),this.set("autoshow",t),e.controls.__datasets&&e.controls.__datasets.get("widget").set("autoshow",this.autoshow.checked)}this.initialize(e.options)},storeSetting(e,t){this.settings[e]=t;const n=this.get("debugbar");n.options[e]=t,e!=="theme"&&n.el.setAttribute(`data-${e}`,t),localStorage.setItem("phpdebugbar-settings",JSON.stringify(this.settings))},render(){this.el.innerHTML="";const e=this.get("debugbar"),t=this,n={},u=document.createElement("select");u.innerHTML='<option value="auto">Auto (System preference)</option><option value="light">Light</option><option value="dark">Dark</option>',u.value=e.options.theme,u.addEventListener("change",function(){t.storeSetting("theme",this.value),e.setTheme(this.value)}),n.Theme=u;const f=document.createElement("select");f.innerHTML='<option value="bottomLeft">Bottom Left</option><option value="bottomRight">Bottom Right</option><option value="topLeft">Top Left</option><option value="topRight">Top Right</option>',f.value=e.options.openBtnPosition,f.addEventListener("change",function(){t.storeSetting("openBtnPosition",this.value)}),n["Open Button Position"]=f,this.hideEmptyTabs=document.createElement("input"),this.hideEmptyTabs.type="checkbox",this.hideEmptyTabs.checked=e.options.hideEmptyTabs,this.hideEmptyTabs.addEventListener("click",function(){t.storeSetting("hideEmptyTabs",this.checked)});const k=document.createElement("label");k.append(this.hideEmptyTabs,"Hide empty tabs until they have data"),n["Hide Empty Tabs"]=k,this.autoshow=document.createElement("input"),this.autoshow.type="checkbox",this.autoshow.checked=e.ajaxHandler&&e.ajaxHandler.autoShow,this.autoshow.addEventListener("click",function(){e.ajaxHandler&&e.ajaxHandler.setAutoShow(this.checked),e.controls.__datasets&&e.controls.__datasets.get("widget").set("autoshow",this.checked)}),this.bindAttr("autoshow",function(){this.autoshow.checked=this.get("autoshow"),this.autoshow.closest(`.${l("form-row")}`).style.display=""});const x=document.createElement("label");x.append(this.autoshow,"Automatically show new incoming Ajax requests"),n.Autoshow=x;const i=document.createElement("button");i.textContent="Reset settings",i.addEventListener("click",r=>{r.preventDefault(),t.clearSettings(),t.render()}),n["Reset to defaults"]=i;for(const[r,g]of Object.entries(n)){const o=document.createElement("div");o.classList.add(l("form-row"));const p=document.createElement("div");p.classList.add(l("form-label")),p.textContent=r,o.append(p);const m=document.createElement("div");m.classList.add(l("form-input")),g instanceof HTMLElement?m.append(g):m.innerHTML=g,o.append(m),t.el.append(o)}this.ajaxHandler||(this.autoshow.closest(`.${l("form-row")}`).style.display="none")}});class y{constructor(t){this.debugbar=t}format(t,n,u,f){if(u=u?` ${u}`:"",f=f||Object.keys(this.debugbar.datasets).length,n.__meta===void 0)return`#${f}${u}`;const k=n.__meta.uri.split("/");let x=k.pop();x||(x=`${k.pop()||""}/`),k.length&&!isNaN(x)&&(x=`${k.pop()}/${x}`);const i=150;return x.length>i&&(x=`${x.substr(0,i)}...`),`#${f} ${x}${u} (${n.__meta.datetime.split(" ")[1]})`}}PhpDebugBar.DatasetTitleFormater=y;const h=PhpDebugBar.DebugBar=d.extend({className:`phpdebugbar ${l("minimized")}`,options:{bodyMarginBottom:!0,theme:"auto",openBtnPosition:"bottomLeft",hideEmptyTabs:!1},initialize(e={}){this.options=Object.assign({},this.options,e),this.defaultOptions=j({},this.options),this.controls={},this.dataMap={},this.datasets={},this.firstTabName=null,this.activePanelName=null,this.activeDatasetId=null,this.datesetTitleFormater=new y(this);const t=window.getComputedStyle(document.body);this.bodyMarginBottomHeight=Number.parseInt(t.marginBottom);try{this.isIframe=window.self!==window.top&&window.top.phpdebugbar}catch(n){this.isIframe=!1}this.registerResizeHandler(),this.registerMediaListener(),this.settings=new PhpDebugBar.DebugBar.Tab({icon:"adjustments-horizontal",title:"Settings",widget:new a({debugbar:this})})},registerResizeHandler(){if(this.resize.bind===void 0||this.isIframe)return;const e=this.resize.bind(this);this.respCSSSize=0,window.addEventListener("resize",e),setTimeout(e,20)},registerMediaListener(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.options.theme==="auto"&&this.setTheme("auto")})},setTheme(e){this.options.theme=e,e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),this.el.setAttribute("data-theme",e),this.openHandler&&this.openHandler.el.setAttribute("data-theme",e)},resize(){if(this.isIframe)return;let e=this.respCSSSize;if(this.respCSSSize===0){const k=Array.from(this.header.children).filter(x=>x.offsetParent!==null);for(const x of k){const i=window.getComputedStyle(x);e+=x.offsetWidth+parseFloat(i.marginLeft)+parseFloat(i.marginRight)}}const t=this.header.offsetWidth,n=l("mini-design"),u=this.header.classList.contains(n);t<=e&&!u?(this.respCSSSize=e,this.header.classList.add(n)):e<t&&u&&(this.respCSSSize=0,this.header.classList.remove(n));const f=this.body.offsetHeight||parseInt(this.body.style.height)||parseInt(localStorage.getItem("phpdebugbar-height"))||300;this.setHeight(f)},render(){this.isIframe&&(this.el.style.display="none");const e=this;document.body.append(this.el),this.dragCapture=document.createElement("div"),this.dragCapture.classList.add(l("drag-capture")),this.el.append(this.dragCapture),this.resizeHandle=document.createElement("div"),this.resizeHandle.classList.add(l("resize-handle")),this.el.append(this.resizeHandle),this.header=document.createElement("div"),this.header.classList.add(l("header")),this.el.append(this.header),this.headerBtn=document.createElement("a"),this.headerBtn.classList.add(l("restore-btn")),this.header.append(this.headerBtn),this.headerBtn.addEventListener("click",()=>{e.close()}),this.headerLeft=document.createElement("div"),this.headerLeft.classList.add(l("header-left")),this.header.append(this.headerLeft),this.headerRight=document.createElement("div"),this.headerRight.classList.add(l("header-right")),this.header.append(this.headerRight),this.body=document.createElement("div"),this.body.classList.add(l("body")),this.el.append(this.body),this.recomputeBottomOffset();let t,n;const u=k=>{const x=n+(t-k.pageY);e.setHeight(x)},f=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f),e.dragCapture.style.display="none"};this.resizeHandle.addEventListener("mousedown",k=>{n=e.body.offsetHeight,t=k.pageY,document.addEventListener("mousemove",u),document.addEventListener("mouseup",f),e.dragCapture.style.display="",k.preventDefault()}),this.closebtn=document.createElement("a"),this.closebtn.classList.add(l("close-btn")),this.headerRight.append(this.closebtn),this.closebtn.addEventListener("click",()=>{e.close()}),this.minimizebtn=document.createElement("a"),this.minimizebtn.classList.add(l("minimize-btn")),this.headerRight.append(this.minimizebtn),this.minimizebtn.addEventListener("click",()=>{e.minimize()}),this.maximizebtn=document.createElement("a"),this.maximizebtn.classList.add(l("maximize-btn")),this.headerRight.append(this.maximizebtn),this.maximizebtn.addEventListener("click",()=>{e.restore()}),this.restorebtn=document.createElement("a"),this.restorebtn.classList.add(l("restore-btn")),this.restorebtn.style.display="none",this.el.append(this.restorebtn),this.restorebtn.addEventListener("click",()=>{e.restore()}),this.openbtn=document.createElement("a"),this.openbtn.classList.add(l("open-btn")),this.openbtn.style.display="none",this.headerRight.append(this.openbtn),this.openbtn.addEventListener("click",()=>{e.openHandler.show((k,x)=>{e.addDataSet(x,k,"(opened)"),e.showTab()})}),this.datasetsSelect=document.createElement("select"),this.datasetsSelect.classList.add(l("datasets-switcher")),this.datasetsSelect.setAttribute("name","datasets-switcher"),this.headerRight.append(this.datasetsSelect),this.datasetsSelect.addEventListener("change",function(){e.showDataSet(this.value)}),this.controls.__settings=this.settings,this.settings.tab.classList.add(l("tab-settings")),this.settings.tab.setAttribute("data-collector","__settings"),this.settings.el.setAttribute("data-collector","__settings"),this.maximizebtn.after(this.settings.tab),this.settings.tab.style.display="",this.settings.tab.addEventListener("click",()=>{!this.isMinimized()&&this.activePanelName==="__settings"?this.minimize():(this.showTab("__settings"),this.settings.get("widget").render())}),this.body.append(this.settings.el)},setHeight(e){const n=window.innerHeight-this.header.offsetHeight-10;e=Math.min(e,n),e=Math.max(e,40),this.body.style.height=`${e}px`,localStorage.setItem("phpdebugbar-height",e),this.recomputeBottomOffset()},restoreState(){if(this.isIframe)return;const e=localStorage.getItem("phpdebugbar-height");this.setHeight(parseInt(e)||this.body.offsetHeight);const t=localStorage.getItem("phpdebugbar-open");if(t&&t==="0")this.close();else{const n=localStorage.getItem("phpdebugbar-visible");if(n&&n==="1"){const u=localStorage.getItem("phpdebugbar-tab");this.isTab(u)?this.showTab(u):this.showTab()}}},createTab(e,t,n){const u=new c({title:n||e.replace(/[_-]/g," ").charAt(0).toUpperCase()+e.slice(1),widget:t});return this.addTab(e,u)},addTab(e,t){if(this.isControl(e))throw new Error(`${e} already exists`);const n=this;return this.headerLeft.append(t.tab),t.tab.addEventListener("click",()=>{!n.isMinimized()&&n.activePanelName===e?n.minimize():n.showTab(e)}),t.tab.setAttribute("data-empty",!0),t.tab.setAttribute("data-collector",e),t.el.setAttribute("data-collector",e),this.body.append(t.el),this.controls[e]=t,this.firstTabName===null&&(this.firstTabName=e),t},createIndicator(e,t,n,u){const f=new b({icon:t,tooltip:n});return this.addIndicator(e,f,u)},addIndicator(e,t,n){if(this.isControl(e))throw new Error(`${e} already exists`);return t.set("debugbar",this),n==="left"?this.headerLeft.prepend(t.el):this.headerRight.append(t.el),this.controls[e]=t,t},getControl(e){if(this.isControl(e))return this.controls[e]},isControl(e){return this.controls[e]!==void 0},isTab(e){return this.isControl(e)&&this.controls[e]instanceof c},isIndicator(e){return this.isControl(e)&&this.controls[e]instanceof b},reset(){this.minimize();for(const[e,t]of Object.entries(this.controls))this.isTab(e)&&t.tab.remove(),t.el.remove();this.controls={}},showTab(e){if(e||(this.activePanelName?e=this.activePanelName:e=this.firstTabName),!this.isTab(e))throw new Error(`Unknown tab '${e}'`);this.resizeHandle.style.display="block",this.body.style.display="block",this.recomputeBottomOffset();const t=l("active"),n=this.header.querySelectorAll(` div > .${t}`);for(const f of n)f.classList.remove(t);const u=this.body.querySelectorAll(`:scope > .${t}`);for(const f of u)f.classList.remove(t);this.controls[e].tab.classList.add(t),this.controls[e].el.classList.add(t),this.activePanelName=e,this.el.classList.remove(l("minimized")),localStorage.setItem("phpdebugbar-visible","1"),localStorage.setItem("phpdebugbar-tab",e),this.resize()},minimize(){const e=l("active"),t=this.header.querySelectorAll(`:scope > div > .${e}`);for(const n of t)n.classList.remove(e);this.body.style.display="none",this.resizeHandle.style.display="none",this.recomputeBottomOffset(),localStorage.setItem("phpdebugbar-visible","0"),this.el.classList.add(l("minimized")),this.resize()},isMinimized(){return this.el.classList.contains(l("minimized"))},close(){this.resizeHandle.style.display="none",this.header.style.display="none",this.body.style.display="none",this.restorebtn.style.display="",localStorage.setItem("phpdebugbar-open","0"),this.el.classList.add(l("closed")),this.recomputeBottomOffset()},isClosed(){return this.el.classList.contains(l("closed"))},restore(){this.resizeHandle.style.display="block",this.header.style.display="block",this.restorebtn.style.display="none",localStorage.setItem("phpdebugbar-open","1");const e=localStorage.getItem("phpdebugbar-tab");this.isTab(e)?this.showTab(e):this.showTab(),this.el.classList.remove(l("closed")),this.resize()},recomputeBottomOffset(){if(this.options.bodyMarginBottom){if(this.isClosed()){document.body.style.marginBottom=this.bodyMarginBottomHeight?`${this.bodyMarginBottomHeight}px`:"";return}const e=this.el.offsetHeight+(this.bodyMarginBottomHeight||0);document.body.style.marginBottom=`${e}px`}},setDataMap(e){this.dataMap=e},addDataMap(e){Object.assign(this.dataMap,e)},setData(e){return this.datasets={},this.addDataSet(e)},addDataSet(e,t,n,u){if(!e||!e.__meta)return;if(this.isIframe){window.top.phpdebugbar.addDataSet(e,t,`(iframe)${n||""}`,u);return}const f=Object.keys(this.datasets).length+1;t=t||f,e.__meta.nb=f,e.__meta.suffix=n,this.datasets[t]=e;const k=this.datesetTitleFormater.format(t,this.datasets[t],n,f);if(this.datasetTab){this.datasetTab.set("data",this.datasets);const i=Object.keys(this.datasets).length;this.datasetTab.set("badge",i>1?i:null),this.datasetTab.tab.style.display=""}const x=document.createElement("option");return x.value=t,x.textContent=k,this.datasetsSelect.append(x),this.datasetsSelect.children.length>1&&(this.datasetsSelect.style.display=""),(u===void 0||u)&&this.showDataSet(t),this.resize(),t},loadDataSet(e,t,n,u){if(!this.openHandler)throw new Error("loadDataSet() needs an open handler");const f=this;this.openHandler.load(e,k=>{f.addDataSet(k,e,t,u),f.resize(),n&&n(k)})},getDataSet(e){return this.datasets[e]},showDataSet(e){this.activeDatasetId=e,this.dataChangeHandler(this.datasets[e]),this.datasetsSelect.value!==e&&(this.datasetsSelect.value=e),this.datasetTab&&this.datasetTab.get("widget").set("id",e)},dataChangeHandler(e){for(const[t,n]of Object.entries(this.dataMap)){const u=s(e,n[0],n[1]);if(t.includes(":")){const f=t.split(":");this.getControl(f[0]).set(f[1],u)}else this.getControl(t).set("data",u)}this.resize()},setOpenHandler(e){this.openHandler=e,this.openHandler.el.setAttribute("data-theme",this.el.getAttribute("data-theme")),e!==null?this.openbtn.style.display="":this.openbtn.style.display="none"},getOpenHandler(){return this.openHandler},enableAjaxHandlerTab(){this.datasetTab=new PhpDebugBar.DebugBar.Tab({icon:"history",title:"Request history",widget:new PhpDebugBar.Widgets.DatasetWidget({debugbar:this})}),this.datasetTab.tab.classList.add(l("tab-history")),this.datasetTab.tab.setAttribute("data-collector","__datasets"),this.datasetTab.el.setAttribute("data-collector","__datasets"),this.openbtn.after(this.datasetTab.tab),this.datasetTab.tab.style.display="none",this.datasetTab.tab.addEventListener("click",()=>{!this.isMinimized()&&this.activePanelName==="__datasets"?this.minimize():this.showTab("__datasets")}),this.body.append(this.datasetTab.el),this.controls.__datasets=this.datasetTab}});h.Tab=c,h.Indicator=b;class v{constructor(t,n,u){this.debugbar=t,this.headerName=n||"phpdebugbar",this.autoShow=u===void 0?!0:u,this.defaultAutoShow=this.autoShow,localStorage.getItem("phpdebugbar-ajaxhandler-autoshow")!==null&&(this.autoShow=localStorage.getItem("phpdebugbar-ajaxhandler-autoshow")==="1"),t.controls.__settings&&t.controls.__settings.get("widget").set("autoshow",this.autoShow)}handle(t){return!!(this.loadFromId(t)||this.loadFromData(t))}getHeader(t,n){if(t instanceof Response)return t.headers.get(n);if(t instanceof XMLHttpRequest)return t.getResponseHeader(n)}setAutoShow(t){this.autoShow=t,localStorage.setItem("phpdebugbar-ajaxhandler-autoshow",t?"1":"0")}loadFromId(t){const n=this.extractIdFromHeaders(t);return n&&this.debugbar.openHandler?(this.debugbar.loadDataSet(n,"(ajax)",void 0,this.autoShow),!0):!1}extractIdFromHeaders(t){return this.getHeader(t,`${this.headerName}-id`)}loadFromData(t){const n=this.extractDataFromHeaders(t);if(!n)return!1;const u=this.parseHeaders(n);if(u.error)throw new Error(`Error loading debugbar data: ${u.error}`);return u.data&&this.debugbar.addDataSet(u.data,u.id,"(ajax)",this.autoShow),!0}extractDataFromHeaders(t){let n=this.getHeader(t,this.headerName);if(n){for(let u=1;;u++){const f=this.getHeader(t,`${this.headerName}-${u}`);if(!f)break;n+=f}return decodeURIComponent(n)}}parseHeaders(t){return JSON.parse(t)}bindToFetch(){const t=this,n=window.fetch;n!==void 0&&n.polyfill!==void 0||(window.fetch=function(...u){const f=n.apply(window,u);return f.then(k=>{t.handle(k)}).catch(k=>{}),f})}bindToXHR(){const t=this,n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(u,f,k,x,i){const r=this;r.addEventListener("readystatechange",()=>{r.readyState===4&&t.handle(r)},!1),n.apply(r,[u,f,k,x,i])}}}PhpDebugBar.AjaxHandler=v})();typeof PhpDebugBar=="undefined"&&(window.PhpDebugBar={});(function(){PhpDebugBar.Widgets={};const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),l=PhpDebugBar.Widgets.htmlize=function(i){return i.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")},d=PhpDebugBar.Widgets.renderValue=function(i,r){return typeof i!="string"?r?l(JSON.stringify(i,void 0,2)):JSON.stringify(i):i},c=PhpDebugBar.Widgets.highlight=function(i,r){if(typeof i=="string"){if(typeof phpdebugbar_hljs=="undefined")return l(i);const g=phpdebugbar_hljs.default||phpdebugbar_hljs;return r&&g.getLanguage(r)?g.highlight(i,{language:r}).value:g.highlightAuto(i).value}if(typeof phpdebugbar_hljs=="object"){const g=phpdebugbar_hljs.default||phpdebugbar_hljs;i.each((o,p)=>{g.highlightElement(p)})}return i},b=PhpDebugBar.Widgets.createCodeBlock=function(i,r,g,o){const p=document.createElement("pre");p.classList.add(s("code-block"));const m=document.createElement("code");if(m.textContent=`${i}
`,p.append(m),r&&m.classList.add(`language-${r}`),c(m),m.classList.remove("hljs"),!isNaN(Number.parseFloat(g))){const L=i.split(`
`).length,E=document.createElement("ul");p.prepend(E);const C=Array.from(p.children);for(const T of C)T.classList.add(s("numbered-code"));for(let T=g;T<g+L;T++){const w=document.createElement("li");if(w.textContent=T,E.append(w),o===T){w.classList.add(s("highlighted-line"));const _=document.createElement("span");_.innerHTML="&nbsp;",w.append(_)}}}return p},{getDictValue:a}=PhpDebugBar.utils,y=PhpDebugBar.Widgets.ListWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:s("list"),initialize(i){i.itemRenderer||(i.itemRenderer=this.itemRenderer),this.set(i)},render(){this.bindAttr(["itemRenderer","data"],function(){if(this.el.innerHTML="",!this.has("data"))return;const i=this.get("data");for(let r=0;r<i.length;r++){const g=document.createElement("li");g.classList.add(s("list-item")),this.el.append(g),this.get("itemRenderer")(g,i[r])}})},itemRenderer(i,r){i.innerHTML=d(r)}}),h=PhpDebugBar.Widgets.KVListWidget=y.extend({tagName:"dl",className:s("kvlist"),render(){this.bindAttr(["itemRenderer","data"],function(){if(this.el.innerHTML="",!!this.has("data"))for(const[i,r]of Object.entries(this.get("data"))){const g=document.createElement("dt");g.classList.add(s("key")),this.el.append(g);const o=document.createElement("dd");o.classList.add(s("value")),this.el.append(o),this.get("itemRenderer")(g,o,i,r)}})},itemRenderer(i,r,g,o){i.textContent=g,r.innerHTML=l(o)}}),v=PhpDebugBar.Widgets.VariableListWidget=h.extend({className:s("kvlist varlist"),itemRenderer(i,r,g,o){const p=document.createElement("span");p.setAttribute("title",g),p.textContent=g,i.append(p);let m=o&&o.value||o;m&&m.length>100&&(m=`${m.substr(0,100)}...`);let L=null;r.textContent=m,r.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";r.classList.contains(s("pretty"))?(r.textContent=m,r.classList.remove(s("pretty"))):(L=L||b(o),r.classList.add(s("pretty")),r.innerHTML="",r.append(L))})}}),e=PhpDebugBar.Widgets.HtmlVariableListWidget=h.extend({className:s("kvlist htmlvarlist"),itemRenderer(i,r,g,o){const p=document.createElement("i");p.innerHTML=g!=null?g:"";const m=document.createElement("span");if(m.setAttribute("title",p.textContent),m.innerHTML=g!=null?g:"",i.append(m),r.innerHTML=o&&o.value||o,o&&o.xdebug_link){const L=document.createElement("span");if(L.classList.add(s("filename")),L.textContent=o.xdebug_link.filename+(o.xdebug_link.line?`#${o.xdebug_link.line}`:""),o.xdebug_link){const E=document.createElement("a");E.classList.add(s("editor-link")),o.xdebug_link.ajax?(E.setAttribute("title",o.xdebug_link.url),E.addEventListener("click",()=>{fetch(o.xdebug_link.url)})):E.setAttribute("href",o.xdebug_link.url),L.append(E)}r.append(L)}}}),t=PhpDebugBar.Widgets.TableVariableListWidget=PhpDebugBar.Widget.extend({tagName:"div",className:s("tablevarlist"),render(){this.bindAttr("data",function(i){var E,C,T;if(this.el.innerHTML="",!this.has("data"))return;this.table=document.createElement("table"),this.table.classList.add(s("tablevar")),this.el.append(this.table);const r=document.createElement("tr");r.classList.add(s("header"));const g=document.createElement("td");r.append(g),this.table.append(r);let o=i.key_map||{value:"Value"};Array.isArray(o)&&(o=Object.fromEntries(o.map(w=>[w,null])));for(const[w,_]of Object.entries(o)){const B=document.createElement("td");if(B.textContent=_!=null?_:w,r.append(B),i.badges&&i.badges[w]){const A=document.createElement("span");A.textContent=i.badges[w],A.classList.add(s("badge")),B.append(A)}}const p=this;if(!i.data)return;for(const[w,_]of Object.entries(i.data)){const B=document.createElement("tr");B.classList.add(s("item")),p.table.append(B);const A=document.createElement("td");if(A.classList.add(s("key")),A.textContent=w,B.append(A),typeof _!="object"||_===null){const D=document.createElement("td");D.classList.add(s("value")),D.textContent=_!=null?_:"",B.append(D);continue}for(const D of Object.keys(o)){const S=document.createElement("td");S.classList.add(s("value")),S.textContent=(E=_[D])!=null?E:"",B.append(S)}if(_.xdebug_link){const D=document.createElement("td");D.classList.add(s("editor")),B.append(D);const S=document.createElement("span");S.classList.add(s("filename")),S.textContent=_.xdebug_link.filename+(_.xdebug_link.line?`#${_.xdebug_link.line}`:""),D.append(S);const H=document.createElement("a");H.classList.add(s("editor-link")),_.xdebug_link.ajax?(H.setAttribute("title",_.xdebug_link.url),H.addEventListener("click",()=>{fetch(_.xdebug_link.url)})):H.setAttribute("href",_.xdebug_link.url),S.append(H),i.xdebug_link||(i.xdebug_link=!0,r.append(document.createElement("td")))}}if(!i.summary)return;const m=document.createElement("tr");m.classList.add(s("summary")),p.table.append(m);const L=document.createElement("td");if(L.classList.add(s("key")),m.append(L),typeof i.summary!="object"||i.summary===null){const w=document.createElement("td");w.classList.add(s("value")),w.textContent=(C=i.summary)!=null?C:"",m.append(w)}else for(const w of Object.keys(o)){const _=document.createElement("td");_.classList.add(s("value")),_.textContent=(T=i.summary[w])!=null?T:"",m.append(_)}i.xdebug_link&&m.append(document.createElement("td"))})}}),n=PhpDebugBar.Widgets.IFrameWidget=PhpDebugBar.Widget.extend({tagName:"iframe",className:s("iframe"),render(){this.el.setAttribute("seamless","seamless"),this.el.setAttribute("border","0"),this.el.setAttribute("width","100%"),this.el.setAttribute("height","100%"),this.bindAttr("data",function(i){this.el.setAttribute("src",i)})}}),u=PhpDebugBar.Widgets.MessagesWidget=PhpDebugBar.Widget.extend({className:s("messages"),render(){const i=this;this.list=new y({itemRenderer(g,o){let p;if(o.message_html)p=document.createElement("span"),p.classList.add(s("value")),p.innerHTML=o.message_html,g.append(p);else{let m=o.message;if(m.length>100&&(m=`${m.substr(0,100)}...`),p=document.createElement("span"),p.classList.add(s("value")),p.textContent=m,g.append(p),!o.is_string||o.message.length>100){let L=o.message;o.is_string||(L=null),g.style.cursor="pointer",g.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";p.classList.contains(s("pretty"))?(p.textContent=m,p.classList.remove(s("pretty"))):(L=L||b(o.message,"php"),p.classList.add(s("pretty")),p.innerHTML="",p.append(L))})}}if(o.xdebug_link){const m=document.createElement("span");if(m.classList.add(s("filename")),m.textContent=o.xdebug_link.filename+(o.xdebug_link.line?`#${o.xdebug_link.line}`:""),o.xdebug_link){const L=document.createElement("a");L.classList.add(s("editor-link")),o.xdebug_link.ajax?(L.setAttribute("title",o.xdebug_link.url),L.addEventListener("click",()=>{fetch(o.xdebug_link.url)})):L.setAttribute("href",o.xdebug_link.url),m.append(L)}g.prepend(m)}if(o.collector){const m=document.createElement("span");m.classList.add(s("collector")),m.textContent=o.collector,g.prepend(m)}if(o.label){p.classList.add(s(o.label));const m=document.createElement("span");m.classList.add(s("label")),m.textContent=o.label,g.prepend(m)}}}),this.el.append(this.list.el),this.toolbar=document.createElement("div"),this.toolbar.classList.add(s("toolbar")),this.toolbar.innerHTML='<i class="phpdebugbar-icon phpdebugbar-icon-search"></i>',this.el.append(this.toolbar);const r=document.createElement("input");r.type="text",r.name="search",r.setAttribute("aria-label","Search"),r.placeholder="Search",r.addEventListener("change",function(){i.set("search",this.value)}),this.toolbar.append(r),this.bindAttr("data",function(g){this.set({excludelabel:[],excludecollector:[],search:""});const o=this.toolbar.querySelectorAll(`.${s("filter")}`);for(const T of o)T.remove();const p=[],m=[],L=this,E=function(T,w){const _=document.createElement("a");_.classList.add(s("filter")),_.classList.add(s(T)),_.textContent=w,_.setAttribute("rel",w),_.addEventListener("click",function(){L.onFilterClick(this,T)}),L.toolbar.append(_)};if(g.forEach(T=>{p.includes(T.label||"none")||p.push(T.label||"none"),m.includes(T.collector||"none")||m.push(T.collector||"none")}),p.length>1&&p.forEach(T=>E("label",T)),m.length===1)return;const C=document.createElement("a");C.classList.add(s("filter")),C.style.visibility="hidden",L.toolbar.append(C),m.forEach(T=>E("collector",T))}),this.bindAttr(["excludelabel","excludecollector","search"],function(){const g=this.get("excludelabel")||[],o=this.get("excludecollector")||[],p=this.get("search");let m=!1;const L=[];p&&p===p.toLowerCase()&&(m=!0),this.get("data").forEach(E=>{const C=m?E.message.toLowerCase():E.message;!g.includes(E.label||void 0)&&!o.includes(E.collector||void 0)&&(!p||C.includes(p))&&L.push(E)}),this.list.set("data",L)})},onFilterClick(i,r){i.classList.toggle(s("excluded"));const g=[],o=`.${s("filter")}.${s("excluded")}.${s(r)}`,p=this.toolbar.querySelectorAll(o);for(const m of p)g.push(m.rel==="none"||!m.rel?void 0:m.rel);this.set(`exclude${r}`,g)}}),f=PhpDebugBar.Widgets.TimelineWidget=PhpDebugBar.Widget.extend({tagName:"ul",className:s("timeline"),render(){this.bindAttr("data",function(i){const r=function(o){return o<.001?`${(o*1e6).toFixed()}\u03BCs`:o<.1?`${(o*1e3).toFixed(2)}ms`:o<1?`${(o*1e3).toFixed()}ms`:`${o.toFixed(2)}s`},g=function(p){if(p===0||p===null)return"0B";const m=p<0?"-":"",L=Math.abs(p),E=Math.log(L)/Math.log(1024),C=["B","KB","MB","GB","TB"];return m+Math.round(N(1024,E-Math.floor(E))*100)/100+C[Math.floor(E)]};if(this.el.innerHTML="",i.measures){let o={};for(let L=0;L<i.measures.length;L++){const E=i.measures[L],C=E.group||E.label;o[C]||(o[C]={count:0,duration:0,memory:0}),o[C].count+=1,o[C].duration+=E.duration,o[C].memory+=E.memory||0;const T=document.createElement("div");T.classList.add(s("measure"));const w=document.createElement("li"),_=(E.relative_start*100/i.duration).toFixed(2),B=Math.min((E.duration*100/i.duration).toFixed(2),100-_),A=document.createElement("span");A.classList.add(s("value")),A.style.left=`${_}%`,A.style.width=`${B}%`,T.append(A);const D=document.createElement("span");if(D.classList.add(s("label")),D.textContent=E.label.replace(/\s+/g," ")+(E.duration?` (${E.duration_str}${E.memory?`/${E.memory_str}`:""})`:""),T.append(D),E.collector){const S=document.createElement("span");S.classList.add(s("collector")),S.textContent=E.collector,T.append(S)}if(w.append(T),this.el.append(w),E.params&&Object.keys(E.params).length>0){const S=document.createElement("table");S.classList.add(s("params")),S.style.display="none",S.innerHTML='<tr><th colspan="2">Params</th></tr>';for(const H in E.params)if(typeof E.params[H]!="function"){const M=document.createElement("tr");M.innerHTML=`<td class="${s("name")}">${H}</td><td class="${s("value")}"><pre><code>${E.params[H]}</code></pre></td>`,S.append(M)}w.append(S),w.style.cursor="pointer",w.addEventListener("click",function(){if(window.getSelection().type==="Range")return"";const H=this.querySelector("table");H.style.display!=="none"?H.style.display="none":H.style.display=""}),w.addEventListener("click",H=>{H.target.closest(".sf-dump")&&H.stopPropagation()})}}o=Object.entries(o).map(([L,E])=>({label:L,data:E})).sort((L,E)=>E.data.duration-L.data.duration);const p=document.createElement("table");p.classList.add(s("params"));for(const L of o){const E=Math.min((L.data.duration*100/i.duration).toFixed(2),100),C=document.createElement("i");C.textContent=L.label.replace(/\s+/g," ");const T=C.innerHTML,w=document.createElement("tr");w.innerHTML=`<td class="${s("name")}">${L.data.count} x ${T} (${E}%)</td><td class="${s("value")}"><div class="${s("measure")}"><span class="${s("value")}"></span><span class="${s("label")}">${r(L.data.duration)}${L.data.memory?`/${g(L.data.memory)}`:""}</span></div></td>`,p.append(w);const _=w.querySelector(`span.${s("value")}`);_.style.width=`${E}%`}const m=document.createElement("li");m.append(p),this.el.append(m)}})}}),k=PhpDebugBar.Widgets.ExceptionsWidget=PhpDebugBar.Widget.extend({className:s("exceptions"),render(){this.list=new y({itemRenderer(i,r){const g=document.createElement("span");if(g.classList.add(s("message")),g.textContent=r.message,r.count>1){const o=document.createElement("span");o.classList.add(s("badge")),o.textContent=`${r.count}x`,g.prepend(o)}if(i.append(g),r.file){const o=document.createElement("span");if(o.classList.add(s("filename")),o.textContent=`${r.file}#${r.line}`,r.xdebug_link){const p=document.createElement("a");p.classList.add(s("editor-link")),r.xdebug_link.ajax?(p.setAttribute("title",r.xdebug_link.url),p.addEventListener("click",()=>{fetch(r.xdebug_link.url)})):p.setAttribute("href",r.xdebug_link.url),o.append(p)}i.append(o)}if(r.type){const o=document.createElement("span");o.classList.add(s("type")),o.textContent=r.type,i.append(o)}if(r.surrounding_lines){const o=r.line-3<=0?1:r.line-3,p=b(r.surrounding_lines.join(""),"php",o,r.line);p.classList.add(s("file")),i.append(p),r.stack_trace_html||i.addEventListener("click",()=>{p.style.display!=="none"?p.style.display="none":p.style.display=""})}if(r.stack_trace_html){const o=document.createElement("span");o.classList.add(s("filename")),o.innerHTML=r.stack_trace_html;const p=o.querySelectorAll('samp[data-depth="1"]');for(const m of p){m.classList.remove("sf-dump-expanded"),m.classList.add("sf-dump-compact");const L=m.parentElement.querySelector(">.sf-dump-note");L&&(L.innerHTML=L.innerHTML.replace(/^array:/,'<span class="sf-dump-key">Stack Trace:</span> ')+" files")}i.append(o)}else r.stack_trace&&r.stack_trace.split(`
`).forEach(o=>{const p=document.createElement("div"),m=document.createElement("span");m.classList.add(s("filename")),m.textContent=o,p.append(m),i.append(p)})}}),this.el.append(this.list.el),this.bindAttr("data",function(i){if(this.list.set("data",i),i.length===1){const r=this.list.el.children[0];if(r){const g=r.querySelector(`.${s("file")}`);g&&(g.style.display="")}}})}}),x=PhpDebugBar.Widgets.DatasetWidget=PhpDebugBar.Widget.extend({initialize(i){i.itemRenderer||(i.itemRenderer=this.itemRenderer),this.set(i),this.set("autoshow",null),this.set("id",null),this.set("sort",localStorage.getItem("debugbar-history-sort")||"asc"),this.el.classList.add(s("dataset-history")),this.renderHead()},renderHead(){this.el.innerHTML="",this.actions=document.createElement("div"),this.actions.classList.add(s("dataset-actions")),this.el.append(this.actions);const i=this,r=i.get("debugbar");this.autoshow=document.createElement("input"),this.autoshow.type="checkbox",this.autoshow.addEventListener("click",function(){r.ajaxHandler&&r.ajaxHandler.setAutoShow(this.checked),r.controls.__settings&&r.controls.__settings.get("widget").set("autoshow",this.autoShow)});const g=document.createElement("label");g.textContent="Autoshow",g.append(this.autoshow),this.actions.append(g),this.clearbtn=document.createElement("a"),this.clearbtn.textContent="Clear",this.actions.append(this.clearbtn),this.clearbtn.addEventListener("click",()=>{i.table.innerHTML=""}),this.showBtn=document.createElement("a"),this.showBtn.textContent="Show all",this.actions.append(this.showBtn),this.showBtn.addEventListener("click",()=>{i.searchInput.value=null,i.methodInput.value=null,i.set("search",null),i.set("method",null)}),this.methodInput=document.createElement("select"),this.methodInput.name="method",this.methodInput.style.width="100px",this.methodInput.innerHTML="<option>(method)</option><option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option>",this.methodInput.addEventListener("change",function(){i.set("method",this.value)}),this.actions.append(this.methodInput),this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.name="search",this.searchInput.setAttribute("aria-label","Search"),this.searchInput.placeholder="Search",this.searchInput.addEventListener("input",function(){i.set("search",this.value)}),this.actions.append(this.searchInput),this.table=document.createElement("tbody");const o=document.createElement("table"),p=document.createElement("thead"),m=document.createElement("tr"),L=document.createElement("th");L.style.width="30px",m.append(L);const E=document.createElement("th");E.textContent="Date \u2195",E.style.width="175px",E.addEventListener("click",()=>{i.set("sort",i.get("sort")==="asc"?"desc":"asc"),localStorage.setItem("debugbar-history-sort",i.get("sort"))}),m.append(E);const C=document.createElement("th");C.textContent="Method",C.style.width="80px",m.append(C);const T=document.createElement("th");T.textContent="URL",m.append(T);const w=document.createElement("th");w.setAttribute("width","40%"),w.textContent="Data",m.append(w),p.append(m),o.append(p),o.append(this.table),this.el.append(o)},renderDatasets(){this.table.innerHTML="";const i=this,r=this.get("data");if(r)for(const[g,o]of Object.entries(r))o.__meta&&i.get("itemRenderer")(i,o)},render(){this.bindAttr("data",function(){if(this.get("autoshow")===null&&this.get("debugbar").ajaxHandler&&this.set("autoshow",this.get("debugbar").ajaxHandler.autoShow),!this.has("data"))return;const i=this.get("data"),r=i[Object.keys(i)[Object.keys(i).length-1]];r.__meta&&this.get("itemRenderer")(this,r)}),this.bindAttr(["itemRenderer","search","method","sort"],function(){this.renderDatasets()}),this.bindAttr("autoshow",function(){const i=this.get("autoshow");this.autoshow.checked=i}),this.bindAttr("id",function(){const i=this.get("id"),r=s("active"),g=this.table.querySelectorAll(`.${r}`);for(const p of g)p.classList.remove(r);const o=this.table.querySelector(`tr[data-id="${i}"]`);o&&o.classList.add(r)})},itemRenderer(i,r){const g=r.__meta,o=document.createElement("td"),p=document.createElement("tr");i.get("sort")==="asc"?i.table.append(p):i.table.prepend(p);const m=function(){const A=i.get("debugbar");A.showDataSet(g.id,A.datesetTitleFormater.format("",r,g.suffix,g.nb));const D=s("active"),S=i.table.querySelectorAll(`.${D}`);for(const M of S)M.classList.remove(D);p.classList.add(D);const H=this.dataset.tab;H&&A.showTab(H)};p.setAttribute("data-id",g.id),p.style.cursor="pointer",p.classList.add(s("table-row"));const L=document.createElement("td");L.textContent=`#${g.nb}`,L.addEventListener("click",m),p.append(L);const E=document.createElement("td");E.textContent=g.datetime,E.addEventListener("click",m),p.append(E);const C=document.createElement("td");C.textContent=g.method,C.addEventListener("click",m),p.append(C);const T=document.createElement("td");T.textContent=g.uri+(g.suffix?` ${g.suffix}`:""),T.addEventListener("click",m),p.append(T);const w=i.get("debugbar");for(let[A,D]of Object.entries(w.dataMap)){const S=a(r,D[0],D[1]);if(A.includes(":")){const H=A.split(":");A=H[0];const M=H[1];if(M==="badge"&&S>0){const P=w.getControl(A),$=document.createElement("a");if($.setAttribute("title",P.get("title")),$.dataset.tab=A,P.icon&&$.append(P.icon.cloneNode(!0)),P.badge){const I=P.badge.cloneNode(!0);I.style.display="inline-block",I.textContent=S,$.append(I)}o.append($),$.addEventListener("click",m)}else M==="tooltip"&&w.getControl(A).set("tooltip",S)}}p.append(o),w.activeDatasetId===g.id&&p.classList.add(s("active"));const _=i.get("search"),B=i.get("method");(_&&!g.uri.includes(_)||B&&g.method!==B)&&(p.style.display="none")}})})();typeof PhpDebugBar=="undefined"&&(window.PhpDebugBar={});(function(){const s=function(l){return PhpDebugBar.utils.csscls(l,"phpdebugbar-openhandler-")};PhpDebugBar.OpenHandler=PhpDebugBar.Widget.extend({className:"phpdebugbar-openhandler",defaults:{items_per_page:20},render(){const l=this;document.body.append(this.el),this.el.style.display="none",this.closebtn=document.createElement("a"),this.closebtn.innerHTML='<i class="phpdebugbar-icon phpdebugbar-icon-x"></i>',this.table=document.createElement("tbody");const d=document.createElement("div");d.classList.add(s("header")),d.textContent="PHP DebugBar | Open",d.append(this.closebtn),this.el.append(d);const c=document.createElement("table");c.innerHTML='<thead><tr><th width="155">Date</th><th width="75">Method</th><th>URL</th><th width="125">IP</th><th width="100">Filter data</th></tr></thead>',c.append(this.table),this.el.append(c),this.actions=document.createElement("div"),this.actions.classList.add(s("actions")),this.el.append(this.actions),this.closebtn.addEventListener("click",()=>{l.hide()}),this.loadmorebtn=document.createElement("a"),this.loadmorebtn.textContent="Load more",this.actions.append(this.loadmorebtn),this.loadmorebtn.addEventListener("click",()=>{l.find(l.last_find_request,l.last_find_request.offset+l.get("items_per_page"),l.handleFind.bind(l))}),this.showonlycurrentbtn=document.createElement("a"),this.showonlycurrentbtn.textContent="Show only current URL",this.actions.append(this.showonlycurrentbtn),this.showonlycurrentbtn.addEventListener("click",()=>{l.table.innerHTML="",l.find({uri:window.location.pathname},0,l.handleFind.bind(l))}),this.showallbtn=document.createElement("a"),this.showallbtn.textContent="Show all",this.actions.append(this.showallbtn),this.showallbtn.addEventListener("click",()=>{l.refresh()}),this.clearbtn=document.createElement("a"),this.clearbtn.textContent="Delete all",this.actions.append(this.clearbtn),this.clearbtn.addEventListener("click",()=>{l.clear(()=>{l.hide()})}),this.addSearch(),this.overlay=document.createElement("div"),this.overlay.classList.add(s("overlay")),this.overlay.style.display="none",document.body.append(this.overlay),this.overlay.addEventListener("click",()=>{l.hide()})},refresh(){this.table.innerHTML="",this.loadmorebtn.style.display="",this.find({},0,this.handleFind.bind(this))},addSearch(){const l=this,d=document.createElement("button");d.textContent="Search",d.type="submit",d.addEventListener("click",function(y){l.table.innerHTML="";const h={},v=new FormData(this.parentElement);for(const[e,t]of v.entries())t&&(h[e]=t);l.find(h,0,l.handleFind.bind(l)),y.preventDefault()});const c=document.createElement("form");c.innerHTML='<br/><b>Filter results</b><br/><select name="method"><option selected>(Method)</option><option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option></select>';const b=document.createElement("input");b.type="text",b.name="uri",b.placeholder="URI",c.append(b);const a=document.createElement("input");a.type="text",a.name="ip",a.placeholder="IP",c.append(a),c.append(d),this.actions.append(c)},handleFind(l){const d=this;for(const c of l){const b=document.createElement("a");b.textContent="Load dataset",b.addEventListener("click",x=>{d.hide(),d.load(c.id,i=>{d.callback(c.id,i)}),x.preventDefault()});const a=document.createElement("a");a.textContent=c.method,a.addEventListener("click",x=>{d.table.innerHTML="",d.find({method:c.method},0,d.handleFind.bind(d)),x.preventDefault()});const y=document.createElement("a");y.textContent=c.uri,y.addEventListener("click",x=>{d.hide(),d.load(c.id,i=>{d.callback(c.id,i)}),x.preventDefault()});const h=document.createElement("a");h.textContent=c.ip,h.addEventListener("click",x=>{d.table.innerHTML="",d.find({ip:c.ip},0,d.handleFind.bind(d)),x.preventDefault()});const v=document.createElement("a");v.textContent="Show URL",v.addEventListener("click",x=>{d.table.innerHTML="",d.find({uri:c.uri},0,d.handleFind.bind(d)),x.preventDefault()});const e=document.createElement("tr"),t=document.createElement("td");t.textContent=c.datetime,e.append(t);const n=document.createElement("td");n.textContent=c.method,e.append(n);const u=document.createElement("td");u.append(y),e.append(u);const f=document.createElement("td");f.append(h),e.append(f);const k=document.createElement("td");k.append(v),e.append(k),d.table.append(e)}l.length<this.get("items_per_page")&&(this.loadmorebtn.style.display="none")},show(l){this.callback=l,this.el.style.display="block",this.overlay.style.display="block",this.refresh()},hide(){this.el.style.display="none",this.overlay.style.display="none"},find(l,d,c){const b=Object.assign({},l,{max:this.get("items_per_page"),offset:d||0});this.last_find_request=b,this.ajax(b,c)},load(l,d){this.ajax({op:"get",id:l},d)},clear(l){this.ajax({op:"clear"},l)},ajax(l,d){let c=this.get("url");l&&(c=c+(c.includes("?")?"&":"?")+new URLSearchParams(l)),fetch(c,{method:"GET",headers:{Accept:"application/json"}}).then(b=>b.json()).then(d)}})})();(function(){const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),l=PhpDebugBar.Widgets.SQLQueriesWidget=PhpDebugBar.Widget.extend({className:s("sqlqueries"),onFilterClick(d){d.classList.toggle(s("excluded"));const c=d.getAttribute("rel"),b=this.list.el.querySelectorAll(`li[connection="${c}"]`);for(const a of b)a.style.display=a.style.display==="none"?"":"none"},onCopyToClipboard(d){const c=d.parentElement.querySelector("code"),b=function(){try{document.execCommand("copy")&&(d.classList.add(s("copy-clipboard-check")),setTimeout(()=>{d.classList.remove(s("copy-clipboard-check"))},2e3))}catch(y){console.log("Oops, unable to copy")}};(function(y){if(document.selection){const h=document.body.createTextRange();h.moveToElementText(y),h.select()}else if(window.getSelection){const h=document.createRange();h.selectNodeContents(y),window.getSelection().removeAllRanges(),window.getSelection().addRange(h)}b(),window.getSelection().removeAllRanges()})(c)},renderList(d,c,b){const a=document.createElement("ul");a.classList.add(s("table-list"));for(const e in b){const t=typeof b[e]=="function"?`${b[e].name} {}`:b[e],n=document.createElement("li");if(n.classList.add(s("table-list-item")),typeof t=="object"&&t!==null){const u=document.createElement("span");if(u.classList.add("phpdebugbar-text-muted"),u.textContent=t.index||e,u.append("."),n.append(u),n.append("\xA0"),t.namespace&&n.append(`${t.namespace}::`),n.append(t.name||t.file),t.line){const f=document.createElement("span");f.classList.add("phpdebugbar-text-muted"),f.textContent=`:${t.line}`,n.append(f)}}else{const u=document.createElement("span");u.classList.add("phpdebugbar-text-muted"),u.textContent=`${e}:`,n.append(u),n.append("\xA0");const f=document.createElement("span");f.classList.add("phpdebugbar-text-muted"),f.textContent=t,n.append(f.innerHTML)}a.append(n)}d+=c?` <i class="phpdebugbar-fa phpdebugbar-fa-${c} phpdebugbar-text-muted"></i>`:"";const y=document.createElement("tr"),h=document.createElement("td");h.classList.add(s("name")),h.innerHTML=d,y.append(h);const v=document.createElement("td");return v.classList.add(s("value")),v.append(a),y.append(v),y},render(){this.status=document.createElement("div"),this.status.classList.add(s("status")),this.el.append(this.status),this.toolbar=document.createElement("div"),this.toolbar.classList.add(s("toolbar")),this.el.append(this.toolbar);let d=[];const c=this;this.list=new PhpDebugBar.Widgets.ListWidget({itemRenderer(b,a){if(a.slow&&b.classList.add(s("sql-slow")),a.width_percent){const h=document.createElement("div");h.classList.add(s("bg-measure"));const v=document.createElement("div");v.classList.add(s("value")),v.style.left=`${a.start_percent}%`,v.style.width=`${Math.max(a.width_percent,.01)}%`,h.append(v),b.append(h)}if(a.duration_str){const h=document.createElement("span");h.setAttribute("title","Duration"),h.classList.add(s("duration")),h.textContent=a.duration_str,b.append(h)}if(a.memory_str){const h=document.createElement("span");h.setAttribute("title","Memory usage"),h.classList.add(s("memory")),h.textContent=a.memory_str,b.append(h)}if(typeof a.row_count!="undefined"){const h=document.createElement("span");h.setAttribute("title","Row count"),h.classList.add(s("row-count")),h.textContent=a.row_count,b.append(h)}if(typeof a.stmt_id!="undefined"&&a.stmt_id){const h=document.createElement("span");h.setAttribute("title","Prepared statement ID"),h.classList.add(s("stmt-id")),h.textContent=a.stmt_id,b.append(h)}if(a.connection){const h=document.createElement("span");if(h.setAttribute("title","Connection"),h.classList.add(s("database")),h.textContent=a.connection,b.append(h),b.setAttribute("connection",a.connection),!d.includes(a.connection)){d.push(a.connection);const v=document.createElement("a");v.classList.add(s("filter")),v.textContent=a.connection,v.setAttribute("rel",a.connection),v.addEventListener("click",function(){c.onFilterClick(this)}),c.toolbar.append(v),d.length>1&&(c.toolbar.style.display="",c.list.el.style.marginBottom="20px")}}if(!a.type||a.type==="query"){const h=document.createElement("span");h.setAttribute("title","Copy to clipboard"),h.classList.add(s("copy-clipboard")),h.style.cursor="pointer",h.innerHTML="&#8203;",h.addEventListener("click",function(v){c.onCopyToClipboard(this),v.stopPropagation()}),b.append(h)}if(typeof a.xdebug_link!="undefined"&&a.xdebug_link){const h=document.createElement("span");h.setAttribute("title","Filename"),h.classList.add(s("filename")),h.textContent=a.xdebug_link.filename+(a.xdebug_link.line?`#${a.xdebug_link.line}`:"");const v=document.createElement("a");v.setAttribute("href",a.xdebug_link.url),v.classList.add(s("editor-link")),v.addEventListener("click",e=>{e.stopPropagation(),a.xdebug_link.ajax&&(fetch(a.xdebug_link.url),e.preventDefault())}),h.append(v),b.append(h)}if(a.type==="transaction"){const h=document.createElement("strong");h.classList.add(s("sql"),s("name")),h.textContent=a.sql,b.append(h)}else{const h=document.createElement("code");h.classList.add(s("sql")),h.innerHTML=PhpDebugBar.Widgets.highlight(a.sql,"sql"),b.append(h)}if(typeof a.is_success!="undefined"&&!a.is_success){b.classList.add(s("error"));const h=document.createElement("span");h.classList.add(s("error")),h.textContent=`[${a.error_code}] ${a.error_message}`,b.append(h)}const y=document.createElement("table");y.classList.add(s("params")),a.params&&Object.keys(a.params).length>0&&y.append(c.renderList("Params","thumb-tack",a.params)),a.bindings&&Object.keys(a.bindings).length>0&&y.append(c.renderList("Bindings","thumb-tack",a.bindings)),a.hints&&Object.keys(a.hints).length>0&&y.append(c.renderList("Hints","question-circle",a.hints)),a.backtrace&&Object.keys(a.backtrace).length>0&&y.append(c.renderList("Backtrace","list-ul",a.backtrace)),y.querySelectorAll("tr").length&&(b.append(y),b.style.cursor="pointer",b.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";y.style.display!=="none"?y.style.display="none":y.style.display=""}))}}),this.el.append(this.list.el),this.bindAttr("data",function(b){if(b.length<=0||!b.statements)return!1;d=[],this.toolbar.style.display="none";const a=this.toolbar.querySelectorAll(`.${s("filter")}`);for(const e of a)e.remove();this.list.set("data",b.statements),this.status.innerHTML="";const y={};let h=0;for(let e=0;e<b.statements.length;e++){if(b.statements[e].type&&b.statements[e].type!=="query")continue;let t=b.statements[e].sql;b.statements[e].params&&Object.keys(b.statements[e].params).length>0&&(t+=JSON.stringify(b.statements[e].params)),b.statements[e].bindings&&Object.keys(b.statements[e].bindings).length>0&&(t+=JSON.stringify(b.statements[e].bindings)),b.statements[e].connection&&(t+=`@${b.statements[e].connection}`),y[t]=y[t]||{keys:[]},y[t].keys.push(e)}for(const e in y)if(y[e].keys.length>1){h+=y[e].keys.length;for(let t=0;t<y[e].keys.length;t++){const n=this.list.el.querySelectorAll(`.${s("list-item")}`);n[y[e].keys[t]]&&n[y[e].keys[t]].classList.add(s("sql-duplicate"))}}const v=document.createElement("span");if(v.textContent=`${b.nb_statements} statements were executed`,this.status.append(v),b.nb_failed_statements&&v.append(`, ${b.nb_failed_statements} of which failed`),h){v.append(`, ${h} of which were duplicates`),v.append(`, ${b.nb_statements-h} unique. `);const e="Show only duplicated",t=document.createElement("a");t.classList.add(s("duplicates")),t.textContent=e,t.addEventListener("click",function(){this.classList.toggle("shown-duplicated"),this.textContent=this.classList.contains("shown-duplicated")?"Show All":e;const n=`.${c.className} .${s("list-item")}:not(.${s("sql-duplicate")})`,u=document.querySelectorAll(n);for(const f of u)f.style.display=f.style.display==="none"?"":"none"}),v.append(t)}if(b.accumulated_duration_str){const e=document.createElement("span");e.setAttribute("title","Accumulated duration"),e.classList.add(s("duration")),e.textContent=b.accumulated_duration_str,this.status.append(e)}if(b.memory_usage_str){const e=document.createElement("span");e.setAttribute("title","Memory usage"),e.classList.add(s("memory")),e.textContent=b.memory_usage_str,this.status.append(e)}})}})})();(function(){const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),l=PhpDebugBar.Widgets.TemplatesWidget=PhpDebugBar.Widget.extend({className:s("templates"),render(){this.status=document.createElement("div"),this.status.classList.add(s("status")),this.el.append(this.status),this.list=new PhpDebugBar.Widgets.ListWidget({itemRenderer(d,c){const b=document.createElement("span");if(b.classList.add(s("name")),c.html?b.innerHTML=c.html:b.textContent=c.name,d.append(b),typeof c.xdebug_link!="undefined"&&c.xdebug_link!==null){const a=document.createElement("span");if(a.classList.add(s("filename")),a.textContent=c.xdebug_link.filename+(c.xdebug_link.line?`#${c.xdebug_link.line}`:""),c.xdebug_link){const y=document.createElement("a");y.setAttribute("href",c.xdebug_link.url),y.classList.add(s("editor-link")),y.addEventListener("click",h=>{h.stopPropagation(),c.xdebug_link.ajax&&(fetch(c.xdebug_link.url),h.preventDefault())}),a.append(y)}d.append(a)}if(c.render_time_str){const a=document.createElement("span");a.setAttribute("title","Render time"),a.classList.add(s("render-time")),a.textContent=c.render_time_str,d.append(a)}if(c.memory_str){const a=document.createElement("span");a.setAttribute("title","Memory usage"),a.classList.add(s("memory")),a.textContent=c.memory_str,d.append(a)}if(typeof c.param_count!="undefined"){const a=document.createElement("span");a.setAttribute("title","Parameter count"),a.classList.add(s("param-count")),a.textContent=c.param_count,d.append(a)}if(typeof c.type!="undefined"&&c.type){const a=document.createElement("span");a.setAttribute("title","Type"),a.classList.add(s("type")),a.textContent=c.type,d.append(a)}if(typeof c.editorLink!="undefined"&&c.editorLink){const a=document.createElement("a");a.setAttribute("href",c.editorLink),a.classList.add(s("editor-link")),a.textContent="file",a.addEventListener("click",y=>{y.stopPropagation()}),d.append(a)}if(c.params&&Object.keys(c.params).length>0){const a=document.createElement("table");a.classList.add(s("params")),a.innerHTML='<tr><th colspan="2">Params</th></tr>';for(const y in c.params)if(typeof c.params[y]!="function"){const h=document.createElement("tr");h.innerHTML=`<td class="${s("name")}">${y}</td><td class="${s("value")}"><pre><code>${c.params[y]}</code></pre></td>`,a.append(h)}d.append(a),d.style.cursor="pointer",d.addEventListener("click",()=>{if(window.getSelection().type==="Range")return"";a.style.display!=="none"?a.style.display="none":a.style.display=""})}}}),this.el.append(this.list.el),this.callgraph=document.createElement("div"),this.callgraph.classList.add(s("callgraph")),this.el.append(this.callgraph),this.bindAttr("data",function(d){this.list.set("data",d.templates),this.status.innerHTML="",this.callgraph.innerHTML="";const c=d.sentence||"templates were rendered",b=document.createElement("span");if(b.textContent=`${d.nb_templates} ${c}`,this.status.append(b),d.accumulated_render_time_str){const a=document.createElement("span");a.setAttribute("title","Accumulated render time"),a.classList.add(s("render-time")),a.textContent=d.accumulated_render_time_str,this.status.append(a)}if(d.memory_usage_str){const a=document.createElement("span");a.setAttribute("title","Memory usage"),a.classList.add(s("memory")),a.textContent=d.memory_usage_str,this.status.append(a)}if(d.nb_blocks>0){const a=document.createElement("div");a.textContent=`${d.nb_blocks} blocks were rendered`,this.status.append(a)}if(d.nb_macros>0){const a=document.createElement("div");a.textContent=`${d.nb_macros} macros were rendered`,this.status.append(a)}typeof d.callgraph!="undefined"&&(this.callgraph.innerHTML=d.callgraph)})}})})();(function(){const s=PhpDebugBar.utils.makecsscls("phpdebugbar-widgets-"),l=PhpDebugBar.Widgets.MailsWidget=PhpDebugBar.Widget.extend({className:s("mails"),render(){this.list=new PhpDebugBar.Widgets.ListWidget({itemRenderer(d,c){const b=document.createElement("span");b.classList.add(s("subject")),b.textContent=c.subject,d.append(b);const a=document.createElement("span");if(a.classList.add(s("to")),a.textContent=c.to,d.append(a),c.body||c.html){const y=document.createElement("span");y.classList.add(s("filename")),y.textContent="";const h=document.createElement("a");h.setAttribute("title","Mail Preview"),h.textContent="View Mail",h.classList.add(s("editor-link")),h.addEventListener("click",()=>{const e=window.open("about:blank","Mail Preview","width=650,height=440,scrollbars=yes").document;let t="";if(c.headers){const k=document.createElement("pre");k.style.border="1px solid #ddd",k.style.padding="5px";const x=document.createElement("code");x.textContent=c.headers,k.append(x),t=k.outerHTML}const n=document.createElement("pre");n.style.border="1px solid #ddd",n.style.padding="5px",n.textContent=c.body;let u=n.outerHTML,f="";if(c.html){const k=document.createElement("details"),x=document.createElement("summary");x.textContent="Text version",k.append(x),k.append(n),u=k.outerHTML;const i=document.createElement("iframe");i.setAttribute("width","100%"),i.setAttribute("height","400px"),i.setAttribute("sandbox",""),i.setAttribute("referrerpolicy","no-referrer"),i.setAttribute("srcdoc",c.html),f=i.outerHTML}e.open(),e.write(t+u+f),e.close()}),y.append(h),d.append(y)}if(c.headers){const y=document.createElement("pre");y.classList.add(s("headers"));const h=document.createElement("code");h.textContent=c.headers,y.append(h),d.append(y),d.addEventListener("click",()=>{y.style.display!=="none"?y.style.display="none":y.style.display=""})}}}),this.el.append(this.list.el),this.bindAttr("data",function(d){this.list.set("data",d)})}})})();})();
